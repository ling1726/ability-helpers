/*! For license information please see main.5ff3c654.iframe.bundle.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{24:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Types_namespaceObject})),__webpack_require__.d(__webpack_exports__,"b",(function(){return createTabster})),__webpack_require__.d(__webpack_exports__,"e",(function(){return Tabster_getDeloser})),__webpack_require__.d(__webpack_exports__,"f",(function(){return getModalizer})),__webpack_require__.d(__webpack_exports__,"c",(function(){return disposeTabster})),__webpack_require__.d(__webpack_exports__,"g",(function(){return getTabsterAttribute})),__webpack_require__.d(__webpack_exports__,"d",(function(){return getCurrentTabster}));var Types_namespaceObject={};__webpack_require__.r(Types_namespaceObject),__webpack_require__.d(Types_namespaceObject,"TabsterAttributeName",(function(){return TabsterAttributeName})),__webpack_require__.d(Types_namespaceObject,"TabsterDummyInputAttributeName",(function(){return TabsterDummyInputAttributeName})),__webpack_require__.d(Types_namespaceObject,"ObservedElementAccesibilities",(function(){return ObservedElementAccesibilities})),__webpack_require__.d(Types_namespaceObject,"RestoreFocusOrders",(function(){return RestoreFocusOrders})),__webpack_require__.d(Types_namespaceObject,"MoverKeys",(function(){return MoverKeys})),__webpack_require__.d(Types_namespaceObject,"MoverAxis",(function(){return MoverAxis})),__webpack_require__.d(Types_namespaceObject,"ElementVisibilities",(function(){return ElementVisibilities})),__webpack_require__.d(Types_namespaceObject,"GroupperFocusLimits",(function(){return GroupperFocusLimits})),__webpack_require__.d(Types_namespaceObject,"GroupperNextDirections",(function(){return GroupperNextDirections}));__webpack_require__(19),__webpack_require__(88),__webpack_require__(10),__webpack_require__(18),__webpack_require__(77),__webpack_require__(54),__webpack_require__(150),__webpack_require__(36),__webpack_require__(34),__webpack_require__(681),__webpack_require__(52),__webpack_require__(73),__webpack_require__(78),__webpack_require__(43),__webpack_require__(53),__webpack_require__(20),__webpack_require__(28),__webpack_require__(29),__webpack_require__(32),__webpack_require__(14),__webpack_require__(22),__webpack_require__(211),__webpack_require__(149),__webpack_require__(37),__webpack_require__(191),__webpack_require__(72),__webpack_require__(192),__webpack_require__(679),__webpack_require__(86);var MoverKeys,TabsterAttributeName="data-tabster",TabsterDummyInputAttributeName="data-tabster-dummy",ObservedElementAccesibilities={Any:0,Accessible:1,Focusable:2},RestoreFocusOrders={History:0,DeloserDefault:1,RootDefault:2,DeloserFirst:3,RootFirst:4};!function(MoverKeys){MoverKeys[MoverKeys.Tab=0]="Tab",MoverKeys[MoverKeys.Arrows=1]="Arrows",MoverKeys[MoverKeys.Both=2]="Both"}(MoverKeys||(MoverKeys={}));var _isBrokenIE11,MoverAxis={Horizontal:0,Vertical:1},ElementVisibilities={Invisible:0,PartiallyVisible:1,Visible:2},GroupperFocusLimits={Unlimited:0,Limited:1,LimitedTrapFocus:2},GroupperNextDirections={Both:0,Vertical:1,Horizontal:2,Grid:3};__webpack_require__(641),__webpack_require__(647),__webpack_require__(649),__webpack_require__(650),__webpack_require__(651),__webpack_require__(653),__webpack_require__(654),__webpack_require__(655),__webpack_require__(656),__webpack_require__(657),__webpack_require__(658),__webpack_require__(659),__webpack_require__(660),__webpack_require__(662),__webpack_require__(663),__webpack_require__(664),__webpack_require__(665),__webpack_require__(666),__webpack_require__(667),__webpack_require__(668),__webpack_require__(669),__webpack_require__(674),__webpack_require__(675),__webpack_require__(676),__webpack_require__(677),__webpack_require__(139);function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var _DOMRect="undefined"!=typeof DOMRect?DOMRect:function(){return function _class2(x,y,width,height){_classCallCheck(this,_class2),this.bottom=void 0,this.left=void 0,this.right=void 0,this.top=void 0,this.left=x||0,this.top=y||0,this.right=(x||0)+(width||0),this.bottom=(y||0)+(height||0)}}(),_uidCounter=0;try{document.createTreeWalker(document,NodeFilter.SHOW_ELEMENT),_isBrokenIE11=!1}catch(e){_isBrokenIE11=!0}function getInstanceContext(getWindow){var win=getWindow(),ctx=win.__tabsterInstanceContext;return ctx||(ctx={elementByUId:{},basics:{Promise:win.Promise||void 0,WeakRef:win.WeakRef||void 0},containerBoundingRectCache:{},lastContainerBoundingRectCacheId:0,weakElementStorage:{},lastWeakElementId:0,weakCleanupStarted:!1},win.__tabsterInstanceContext=ctx),ctx}var FakeWeakRef=function(){function FakeWeakRef(target){_classCallCheck(this,FakeWeakRef),this._target=void 0,this._target=target}return _createClass(FakeWeakRef,[{key:"deref",value:function deref(){return this._target}}],[{key:"cleanup",value:function cleanup(fwr){return!fwr._target||!documentContains(fwr._target.ownerDocument,fwr._target)&&(delete fwr._target,!0)}}]),FakeWeakRef}(),WeakHTMLElement=function(){function WeakHTMLElement(getWindow,element,data){_classCallCheck(this,WeakHTMLElement),this._ctx=void 0,this._id=void 0,this._data=void 0;var context=getInstanceContext(getWindow);this._ctx=context,this._id="we"+ ++context.lastWeakElementId,context.weakElementStorage[this._id]=context.WeakRef?new context.WeakRef(element):new FakeWeakRef(element),void 0!==data&&(this._data=data)}return _createClass(WeakHTMLElement,[{key:"get",value:function get(){var ref=this._ctx.weakElementStorage[this._id],el=ref&&ref.deref();return ref&&!el&&delete this._ctx.weakElementStorage[this._id],el}},{key:"getData",value:function getData(){return this._data}}]),WeakHTMLElement}();function cleanupWeakRefStorage(getWindow,forceRemove){var context=getInstanceContext(getWindow);if(forceRemove)context.weakElementStorage={};else for(var _i=0,_Object$keys=Object.keys(context.weakElementStorage);_i<_Object$keys.length;_i++){var _id=_Object$keys[_i],we=context.weakElementStorage[_id];context.WeakRef?we.deref()||delete context.weakElementStorage[_id]:FakeWeakRef.cleanup(we)&&delete context.weakElementStorage[_id]}}function createElementTreeWalker(doc,root,acceptNode){if(root.nodeType===Node.ELEMENT_NODE){var filter=_isBrokenIE11?acceptNode:{acceptNode:acceptNode};return doc.createTreeWalker(root,NodeFilter.SHOW_ELEMENT,filter,!1)}}function getBoundingRect(getWindow,element){var cacheId=element.__tabsterCacheId,context=getInstanceContext(getWindow),cached=cacheId?context.containerBoundingRectCache[cacheId]:void 0;if(cached)return cached.rect;var scrollingElement=element.ownerDocument&&element.ownerDocument.documentElement;if(!scrollingElement)return new _DOMRect;var left=0,top=0,right=scrollingElement.clientWidth,bottom=scrollingElement.clientHeight;if(element!==scrollingElement){var r=element.getBoundingClientRect();left=Math.max(left,r.left),top=Math.max(top,r.top),right=Math.min(right,r.right),bottom=Math.min(bottom,r.bottom)}var rect=new _DOMRect(left<right?left:-1,top<bottom?top:-1,left<right?right-left:0,top<bottom?bottom-top:0);return cacheId||(cacheId="r-"+ ++context.lastContainerBoundingRectCacheId,element.__tabsterCacheId=cacheId),context.containerBoundingRectCache[cacheId]={rect:rect,element:element},context.containerBoundingRectCacheTimer||(context.containerBoundingRectCacheTimer=window.setTimeout((function(){context.containerBoundingRectCacheTimer=void 0;for(var _i2=0,_Object$keys2=Object.keys(context.containerBoundingRectCache);_i2<_Object$keys2.length;_i2++){var cId=_Object$keys2[_i2];delete context.containerBoundingRectCache[cId].element.__tabsterCacheId}context.containerBoundingRectCache={}}),50)),rect}function isElementVerticallyVisibleInContainer(getWindow,element){var container=getScrollableContainer(element);if(container){var containerRect=getBoundingRect(getWindow,container),elementRect=element.getBoundingClientRect();return elementRect.top>=containerRect.top&&elementRect.bottom<=containerRect.bottom}return!1}function isElementVisibleInContainer(getWindow,element){var gap=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,container=getScrollableContainer(element);if(container){var containerRect=getBoundingRect(getWindow,container),elementRect=element.getBoundingClientRect();return elementRect.left>containerRect.right||elementRect.top>containerRect.bottom||elementRect.bottom<containerRect.top||elementRect.right<containerRect.left?ElementVisibilities.Invisible:elementRect.top+gap>=containerRect.top&&elementRect.top<=containerRect.bottom&&elementRect.bottom>=containerRect.top&&elementRect.bottom-gap<=containerRect.bottom&&elementRect.left+gap>=containerRect.left&&elementRect.left<=containerRect.right&&elementRect.right>=containerRect.left&&elementRect.right-gap<=containerRect.right?ElementVisibilities.Visible:ElementVisibilities.PartiallyVisible}return ElementVisibilities.Invisible}function scrollIntoView(getWindow,element,alignToTop){var container=getScrollableContainer(element);if(container){var containerRect=getBoundingRect(getWindow,container),elementRect=element.getBoundingClientRect();container.scrollTop+=alignToTop?elementRect.top-containerRect.top:elementRect.bottom-containerRect.bottom}}function getScrollableContainer(element){var doc=element.ownerDocument;if(doc){for(var el=element.parentElement;el;el=el.parentElement)if(el.scrollWidth>el.clientWidth||el.scrollHeight>el.clientHeight)return el;return doc.documentElement}return null}function getUId(wnd){var rnd=new Uint32Array(4);if(wnd.crypto&&wnd.crypto.getRandomValues)wnd.crypto.getRandomValues(rnd);else if(wnd.msCrypto&&wnd.msCrypto.getRandomValues)wnd.msCrypto.getRandomValues(rnd);else for(var i=0;i<rnd.length;i++)rnd[i]=4294967295*Math.random();for(var srnd=[],_i3=0;_i3<rnd.length;_i3++)srnd.push(rnd[_i3].toString(36));return srnd.push("|"),srnd.push((++_uidCounter).toString(36)),srnd.push("|"),srnd.push(Date.now().toString(36)),srnd.join("")}function getElementUId(getWindow,element){var context=getInstanceContext(getWindow),uid=element.__tabsterElementUID;return uid||(uid=element.__tabsterElementUID=getUId(getWindow())),!context.elementByUId[uid]&&documentContains(element.ownerDocument,element)&&(context.elementByUId[uid]=new WeakHTMLElement(getWindow,element)),uid}function getWindowUId(win){var uid=win.__tabsterCrossOriginWindowUID;return uid||(uid=win.__tabsterCrossOriginWindowUID=getUId(win)),uid}function clearElementCache(getWindow,parent){for(var context=getInstanceContext(getWindow),_i4=0,_Object$keys3=Object.keys(context.elementByUId);_i4<_Object$keys3.length;_i4++){var key=_Object$keys3[_i4],wel=context.elementByUId[key],el=wel&&wel.get();el&&parent&&!parent.contains(el)||delete context.elementByUId[key]}}function documentContains(doc,element){var _doc$body;return!(null==doc||null===(_doc$body=doc.body)||void 0===_doc$body||!_doc$body.contains(element))}function matchesSelector(element,selector){var matches=element.matches||element.matchesSelector||element.msMatchesSelector||element.webkitMatchesSelector;return matches&&matches.call(element,selector)}function getPromise(getWindow){var context=getInstanceContext(getWindow);if(context.basics.Promise)return context.basics.Promise;throw new Error("No Promise defined.")}function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function setTabsterOnElement(tabster,element,tabsterOnElement){var _entry,_entry2,attrObject,uid=element.__tabsterElementUID,entry=uid?tabster.storageEntry(uid):void 0,cur=(null===(_entry=entry)||void 0===_entry?void 0:_entry.tabster)||{},attr=null===(_entry2=entry)||void 0===_entry2?void 0:_entry2.attr;if(attrObject=attr?attr.object:{},Object.keys(tabsterOnElement).forEach((function(key){var h=tabsterOnElement[key];if(void 0===h)cur&&(delete cur[key],delete attrObject[key]);else switch(key){case"deloser":cur[key]=tabsterOnElement.deloser,attrObject[key]=h.getBasicProps();break;case"root":cur[key]=tabsterOnElement.root,attrObject[key]=h.getBasicProps();break;case"modalizer":cur[key]=tabsterOnElement.modalizer,attrObject[key]=h.getBasicProps();break;case"focusable":cur[key]=attrObject[key]=tabsterOnElement.focusable;break;case"groupper":cur[key]=tabsterOnElement.groupper,attrObject[key]=h.getBasicProps();break;case"uberGroupper":cur[key]=tabsterOnElement.uberGroupper,attrObject[key]=!0;break;case"observed":cur[key]=attrObject[key]=tabsterOnElement.observed;break;case"outline":cur[key]=attrObject[key]=tabsterOnElement.outline;break;default:throw new Error("Unknown Tabster part.")}})),0===Object.keys(cur).length)uid&&entry&&(delete entry.tabster,delete entry.attr,tabster.storageEntry(uid,!1)),element.removeAttribute(TabsterAttributeName);else{var attrStr=JSON.stringify(attrObject);entry||(uid||(uid=getElementUId(tabster.getWindow,element)),entry=tabster.storageEntry(uid,!0)),entry.tabster=cur,entry.attr={string:attrStr,object:attrObject,changing:!0},attr&&attr.string===attrStr||element.setAttribute(TabsterAttributeName,entry.attr.string),entry.attr.changing=!1}}function getTabsterOnElement(tabster,element){var _storageEntry,uid=element.__tabsterElementUID;return uid?null===(_storageEntry=tabster.storageEntry(uid))||void 0===_storageEntry?void 0:_storageEntry.tabster:void 0}function Instance_updateTabsterByAttribute(tabster,element){var _entry3,_entry4,_entry5,_entry5$attr,newAttrValue=element.getAttribute(TabsterAttributeName),tabsteri=tabster,uid=element.__tabsterElementUID,entry=uid?tabsteri.storageEntry(uid):void 0,newAttr=null===(_entry3=entry)||void 0===_entry3?void 0:_entry3.attr,tabsterOnElement=null===(_entry4=entry)||void 0===_entry4?void 0:_entry4.tabster;if(newAttrValue){if(newAttrValue!==(newAttr&&newAttr.string))try{var newValue=JSON.parse(newAttrValue);if("object"!==_typeof(newValue))throw new Error("Value is not a JSON object, got '".concat(newAttrValue,"'."));newAttr={string:newAttrValue,object:newValue,changing:!1}}catch(e){0}}else tabsterOnElement&&(newAttr=void 0);var _step,oldObject=(null===(_entry5=entry)||void 0===_entry5||null===(_entry5$attr=_entry5.attr)||void 0===_entry5$attr?void 0:_entry5$attr.object)||{},newObject=newAttr&&newAttr.object||{},_iterator=_createForOfIteratorHelper(Object.keys(oldObject));try{for(_iterator.s();!(_step=_iterator.n()).done;){var key=_step.value;if(!newObject[key])switch(key){case"deloser":tabsteri.deloser&&tabsteri.deloser.remove(element);break;case"root":tabster.root.remove(element);break;case"modalizer":tabsteri.modalizer&&tabsteri.modalizer.remove(element);break;case"focusable":tabster.focusable.setProps(element,null);break;case"groupper":tabster.focusable.removeGroupper(element);break;case"uberGroupper":break;case"observed":tabsteri.observedElement&&tabsteri.observedElement.remove(element);break;case"outline":tabsteri.outline&&tabsteri.outline.setProps(element,null)}}}catch(err){_iterator.e(err)}finally{_iterator.f()}var _step2,_iterator2=_createForOfIteratorHelper(Object.keys(newObject));try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _key=_step2.value;switch(_key){case"deloser":tabsterOnElement&&tabsterOnElement.deloser?tabsterOnElement.deloser.setProps(newObject.deloser):(tabsteri.deloser&&tabsteri.deloser.add(element,newObject.deloser),tabsteri.deloser);break;case"root":tabsterOnElement&&tabsterOnElement.root?tabsterOnElement.root.setProps(newObject.root):tabster.root.add(element);break;case"modalizer":tabsterOnElement&&tabsterOnElement.modalizer?tabsterOnElement.modalizer.setProps(newObject.modalizer):(tabsteri.modalizer&&tabsteri.modalizer.add(element,newObject.modalizer),tabsteri.modalizer);break;case"focusable":tabster.focusable.setProps(element,newObject.focusable||null);break;case"groupper":tabsterOnElement&&tabsterOnElement.groupper?tabsterOnElement.groupper.setProps(newObject.groupper):tabster.focusable.addGroupper(element,newObject.groupper);break;case"uberGroupper":break;case"observed":tabsteri.observedElement&&(tabsterOnElement&&tabsterOnElement.observed?tabsteri.observedElement.setProps(element,newObject.observed):tabsteri.observedElement.add(element,newObject.observed));break;case"outline":tabsteri.outline&&tabsteri.outline.setProps(element,newObject.outline||null);break;default:delete newObject[_key],console.error("Unknown key '".concat(_key,"' in data-tabster attribute value."))}}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}newAttr&&(newAttr.object=newObject,newAttr.string=JSON.stringify(newObject),newAttr.changing=!0,entry||(uid||(uid=getElementUId(tabster.getWindow,element)),entry=tabster.storageEntry(uid,!0)),entry.attr=newAttr,newAttr.string!==newAttrValue&&element.setAttribute(TabsterAttributeName,newAttr.string),newAttr.changing=!1)}__webpack_require__(101);var _canUseWeakRef="undefined"!=typeof WeakRef,WeakRefInstance=function(){function WeakRefInstance(instance){_canUseWeakRef?this._weakRef=new WeakRef(instance):this._instance=instance}return WeakRefInstance.prototype.deref=function(){var _a,_b,_c,instance;return this._weakRef?(instance=null===(_a=this._weakRef)||void 0===_a?void 0:_a.deref())||delete this._weakRef:(null===(_c=null===(_b=instance=this._instance)||void 0===_b?void 0:_b.isDisposed)||void 0===_c?void 0:_c.call(_b))&&delete this._instance,instance},WeakRefInstance}();var _canOverrideNativeFocus=!1;function nativeFocus(element){var focus=element.focus;focus.__keyborgNativeFocus?focus.__keyborgNativeFocus.call(element):element.focus()}var _lastId=0,_state=new(function(){function KeyborgState(){this.__keyborgCoreRefs={},this._isNavigatingWithKeyboard=!1}return KeyborgState.prototype.add=function(keyborg){var id=keyborg.id;id in this.__keyborgCoreRefs||(this.__keyborgCoreRefs[id]=new WeakRefInstance(keyborg))},KeyborgState.prototype.remove=function(id){delete this.__keyborgCoreRefs[id],0===Object.keys(this.__keyborgCoreRefs).length&&(this._isNavigatingWithKeyboard=!1)},KeyborgState.prototype.setVal=function(isNavigatingWithKeyboard){if(this._isNavigatingWithKeyboard!==isNavigatingWithKeyboard){this._isNavigatingWithKeyboard=isNavigatingWithKeyboard;for(var _i=0,_a=Object.keys(this.__keyborgCoreRefs);_i<_a.length;_i++){var id=_a[_i],keyborg=this.__keyborgCoreRefs[id].deref();keyborg?keyborg.update(isNavigatingWithKeyboard):this.remove(id)}}},KeyborgState.prototype.getVal=function(){return this._isNavigatingWithKeyboard},KeyborgState}()),KeyborgCore=function(){function KeyborgCore(win){var _this=this;this._isMouseUsed=!1,this._onFocusIn=function(e){if(_this._isMouseUsed)_this._isMouseUsed=!1;else if(!_state.getVal()){var details=e.details;details.relatedTarget&&(details.isFocusedProgrammatically||void 0===details.isFocusedProgrammatically||_state.setVal(!0))}},this._onMouseDown=function(e){0===e.buttons||0===e.clientX&&0===e.clientY&&0===e.screenX&&0===e.screenY||(_this._isMouseUsed=!0,_state.setVal(!1))},this._onKeyDown=function(e){var isNavigatingWithKeyboard=_state.getVal();isNavigatingWithKeyboard||9!==e.keyCode?isNavigatingWithKeyboard&&27===e.keyCode&&_this._scheduleDismiss():_state.setVal(!0)},this.id="c"+ ++_lastId,this._win=win;var doc=win.document;doc.addEventListener("keyborg:focusin",this._onFocusIn,!0),doc.addEventListener("mousedown",this._onMouseDown,!0),win.addEventListener("keydown",this._onKeyDown,!0),function setupFocusEvent(win){var kwin=win;_canOverrideNativeFocus||(_canOverrideNativeFocus=function canOverrideNativeFocus(win){var HTMLElement=win.HTMLElement,origFocus=HTMLElement.prototype.focus,isCustomFocusCalled=!1;return HTMLElement.prototype.focus=function focus(){isCustomFocusCalled=!0},win.document.createElement("button").focus(),HTMLElement.prototype.focus=origFocus,isCustomFocusCalled}(kwin));var origFocus=kwin.HTMLElement.prototype.focus;if(!origFocus.__keyborgNativeFocus){kwin.HTMLElement.prototype.focus=focus;var data=kwin.__keyborgData={focusInHandler:function focusInHandler(e){var _a,target=e.target;if(target){var event=document.createEvent("HTMLEvents");event.initEvent("keyborg:focusin",!0,!0);var details={relatedTarget:e.relatedTarget||void 0};(_canOverrideNativeFocus||data.lastFocusedProgrammatically)&&(details.isFocusedProgrammatically=target===(null===(_a=data.lastFocusedProgrammatically)||void 0===_a?void 0:_a.deref()),data.lastFocusedProgrammatically=void 0),event.details=details,target.dispatchEvent(event)}}};kwin.document.addEventListener("focusin",kwin.__keyborgData.focusInHandler,!0),focus.__keyborgNativeFocus=origFocus}function focus(){var keyborgNativeFocusEvent=kwin.__keyborgData;return keyborgNativeFocusEvent&&(keyborgNativeFocusEvent.lastFocusedProgrammatically=new WeakRefInstance(this)),origFocus.apply(this,arguments)}}(win),_state.add(this)}return KeyborgCore.prototype.dispose=function(){var win=this._win;if(win){this._dismissTimer&&(win.clearTimeout(this._dismissTimer),this._dismissTimer=void 0),function disposeFocusEvent(win){var kwin=win,proto=kwin.HTMLElement.prototype,origFocus=proto.focus.__keyborgNativeFocus,keyborgNativeFocusEvent=kwin.__keyborgData;keyborgNativeFocusEvent&&(kwin.document.removeEventListener("focusin",keyborgNativeFocusEvent.focusInHandler,!0),delete kwin.__keyborgData),origFocus&&(proto.focus=origFocus)}(win);var doc=win.document;doc.removeEventListener("keyborg:focusin",this._onFocusIn,!0),doc.removeEventListener("mousedown",this._onMouseDown,!0),win.removeEventListener("keydown",this._onKeyDown,!0),delete this._win,_state.remove(this.id)}},KeyborgCore.prototype.isDisposed=function(){return!!this._win},KeyborgCore.prototype.update=function(isNavigatingWithKeyboard){var _a,_b,keyborgs=null===(_b=null===(_a=this._win)||void 0===_a?void 0:_a.__keyborg)||void 0===_b?void 0:_b.refs;if(keyborgs)for(var _i=0,_c=Object.keys(keyborgs);_i<_c.length;_i++){var id=_c[_i];Keyborg.update(keyborgs[id],isNavigatingWithKeyboard)}},KeyborgCore.prototype._scheduleDismiss=function(){var _this=this,win=this._win;if(win){this._dismissTimer&&(win.clearTimeout(this._dismissTimer),this._dismissTimer=void 0);var was_1=win.document.activeElement;this._dismissTimer=win.setTimeout((function(){_this._dismissTimer=void 0;var cur=win.document.activeElement;was_1&&cur&&was_1===cur&&_state.setVal(!1)}),500)}},KeyborgCore}(),Keyborg=function(){function Keyborg(win){var _a;this._cb=[],this._id="k"+ ++_lastId,this._win=win;var current=win.__keyborg;current?(this._core=current.core,current.refs[this._id]=this):(this._core=new KeyborgCore(win),win.__keyborg={core:this._core,refs:(_a={},_a[this._id]=this,_a)})}return Keyborg.create=function(win){return new Keyborg(win)},Keyborg.dispose=function(instance){instance.dispose()},Keyborg.update=function(instance,isNavigatingWithKeyboard){instance._cb.forEach((function(callback){return callback(isNavigatingWithKeyboard)}))},Keyborg.prototype.dispose=function(){var _a,current=null===(_a=this._win)||void 0===_a?void 0:_a.__keyborg;(null==current?void 0:current.refs[this._id])&&(delete current.refs[this._id],0===Object.keys(current.refs).length&&(current.core.dispose(),delete this._win.__keyborg)),this._cb=[],delete this._core,delete this._win},Keyborg.prototype.isNavigatingWithKeyboard=function(){return _state.getVal()},Keyborg.prototype.subscribe=function(callback){this._cb.push(callback)},Keyborg.prototype.unsubscribe=function(callback){var index=this._cb.indexOf(callback);index>=0&&this._cb.splice(index,1)},Keyborg.prototype.setVal=function(isNavigatingWithKeyboard){_state.setVal(isNavigatingWithKeyboard)},Keyborg}();function Subscribable_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var Subscribable=function(){function Subscribable(){!function Subscribable_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Subscribable),this._val=void 0,this._callbacks=[]}return function Subscribable_createClass(Constructor,protoProps,staticProps){return protoProps&&Subscribable_defineProperties(Constructor.prototype,protoProps),staticProps&&Subscribable_defineProperties(Constructor,staticProps),Constructor}(Subscribable,[{key:"dispose",value:function dispose(){this._callbacks=[],delete this._val}},{key:"subscribe",value:function subscribe(callback){this._callbacks.indexOf(callback)<0&&this._callbacks.push(callback)}},{key:"unsubscribe",value:function unsubscribe(callback){var index=this._callbacks.indexOf(callback);index>=0&&this._callbacks.splice(index,1)}},{key:"setVal",value:function setVal(val,details){this._val!==val&&(this._val=val,this._callCallbacks(val,details))}},{key:"getVal",value:function getVal(){return this._val}},{key:"trigger",value:function trigger(val,details){this._callCallbacks(val,details)}},{key:"_callCallbacks",value:function _callCallbacks(val,details){this._callbacks.forEach((function(callback){return callback(val,details)}))}}]),Subscribable}();function KeyboardNavigation_typeof(obj){return(KeyboardNavigation_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function KeyboardNavigation_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _get(target,property,receiver){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(target,property,receiver){var base=function _superPropBase(object,property){for(;!Object.prototype.hasOwnProperty.call(object,property)&&null!==(object=_getPrototypeOf(object)););return object}(target,property);if(base){var desc=Object.getOwnPropertyDescriptor(base,property);return desc.get?desc.get.call(receiver):desc.value}})(target,property,receiver||target)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==KeyboardNavigation_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}var KeyboardNavigation_KeyboardNavigationState=function(_Subscribable){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(KeyboardNavigationState,_Subscribable);var _super=_createSuper(KeyboardNavigationState);function KeyboardNavigationState(getWindow){var _this;return function KeyboardNavigation_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,KeyboardNavigationState),(_this=_super.call(this))._keyborg=void 0,_this._onChange=function(isNavigatingWithKeyboard){_this.setVal(isNavigatingWithKeyboard,void 0)},_this._keyborg=function createKeyborg(win){return Keyborg.create(win)}(getWindow()),_this._keyborg.subscribe(_this._onChange),_this}return function KeyboardNavigation_createClass(Constructor,protoProps,staticProps){return protoProps&&KeyboardNavigation_defineProperties(Constructor.prototype,protoProps),staticProps&&KeyboardNavigation_defineProperties(Constructor,staticProps),Constructor}(KeyboardNavigationState,[{key:"dispose",value:function dispose(){_get(_getPrototypeOf(KeyboardNavigationState.prototype),"dispose",this).call(this),this._keyborg&&(this._keyborg.unsubscribe(this._onChange),function disposeKeyborg(instance){Keyborg.dispose(instance)}(this._keyborg),delete this._keyborg)}},{key:"isNavigatingWithKeyboard",value:function isNavigatingWithKeyboard(){var _this$_keyborg;return!(null===(_this$_keyborg=this._keyborg)||void 0===_this$_keyborg||!_this$_keyborg.isNavigatingWithKeyboard())}}],[{key:"dispose",value:function dispose(instance){instance.dispose()}},{key:"setVal",value:function setVal(instance,val){var _keyborg;null===(_keyborg=instance._keyborg)||void 0===_keyborg||_keyborg.setVal(val)}}]),KeyboardNavigationState}(Subscribable);function MutationEvent_createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function MutationEvent_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return MutationEvent_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return MutationEvent_arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function MutationEvent_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var MUTATION_EVENT_NAME="tabster:mutation-event";function observeMutations(doc,tabster,updateTabsterByAttribute){if("undefined"==typeof MutationObserver)return function(){};var observer=new MutationObserver((function(mutations){var _step,changedRoots={},changedModalizers={},changedGrouppers={},changedObservedElements={},_iterator=MutationEvent_createForOfIteratorHelper(mutations);try{for(_iterator.s();!(_step=_iterator.n()).done;){var mutation=_step.value,target=mutation.target,removed=mutation.removedNodes,added=mutation.addedNodes;if("attributes"===mutation.type){if(mutation.attributeName===TabsterAttributeName){var _storageEntry,uid=target.__tabsterElementUID,tabsterAttr=uid?null===(_storageEntry=tabster.storageEntry(uid))||void 0===_storageEntry?void 0:_storageEntry.attr:void 0;tabsterAttr&&tabsterAttr.changing||updateTabsterByAttribute(tabster,target)}}else{var tabsterOnElement=getTabsterOnElement(tabster,target),root=tabsterOnElement&&tabsterOnElement.root;root&&(changedRoots[root.uid]={root:root,addedTo:target});for(var i=0;i<removed.length;i++)findTargets(removed[i],target.ownerDocument||doc);for(var _i5=0;_i5<added.length;_i5++)findTargets(added[_i5],void 0,target)}}}catch(err){_iterator.e(err)}finally{_iterator.f()}for(var _i=0,_Object$keys=Object.keys(changedRoots);_i<_Object$keys.length;_i++){var _id=_Object$keys[_i],r=changedRoots[_id];r.removedFrom&&dispatchMutationEvent(r.removedFrom,{root:r.root,removed:!0,isMutation:!0}),r.addedTo&&dispatchMutationEvent(r.addedTo,{root:r.root,removed:!1,isMutation:!0})}for(var _i2=0,_Object$keys2=Object.keys(changedModalizers);_i2<_Object$keys2.length;_i2++){var _id2=_Object$keys2[_i2],l=changedModalizers[_id2];l.removedFrom&&dispatchMutationEvent(l.removedFrom,{modalizer:l.modalizer,removed:!0,isMutation:!0}),l.addedTo&&dispatchMutationEvent(l.addedTo,{modalizer:l.modalizer,removed:!1,isMutation:!0})}for(var _i3=0,_Object$keys3=Object.keys(changedGrouppers);_i3<_Object$keys3.length;_i3++){var _id3=_Object$keys3[_i3],g=changedGrouppers[_id3];g.removedFrom&&!g.addedTo&&dispatchMutationEvent(g.removedFrom,{groupper:g.groupper,removed:!0,isMutation:!0}),g.addedTo&&dispatchMutationEvent(g.addedTo,{groupper:g.groupper,removed:!1,isMutation:!0})}for(var _i4=0,_Object$keys4=Object.keys(changedObservedElements);_i4<_Object$keys4.length;_i4++){var _id4=_Object$keys4[_i4],e=changedObservedElements[_id4];e.removedFrom&&!e.addedTo&&dispatchMutationEvent(e.removedFrom,{observed:e.element,removed:!0,isMutation:!0}),e.addedTo&&dispatchMutationEvent(e.addedTo,{observed:e.element,removed:!1,isMutation:!0})}function findTargets(node,removedFrom,addedTo){acceptNode(node,removedFrom,addedTo);var walker=createElementTreeWalker(doc,node,(function(element){return acceptNode(element,removedFrom,addedTo)}));if(walker)for(;walker.nextNode(););}function acceptNode(element,removedFrom,addedTo){if(!element.getAttribute)return NodeFilter.FILTER_SKIP;var uid=element.__tabsterElementUID;if(uid){var getWindow=tabster.getWindow,instanceContext=getInstanceContext(getWindow);removedFrom?delete instanceContext.elementByUId[uid]:addedTo&&(instanceContext.elementByUId[uid]=new WeakHTMLElement(getWindow,element))}var tabsterOnElement=getTabsterOnElement(tabster,element);return tabsterOnElement?(tabsterOnElement.root&&function addRootTarget(root,removedFrom,addedTo){var r=changedRoots[root.uid];r||(r=changedRoots[root.uid]={root:root});removedFrom&&(r.removedFrom=removedFrom);addedTo&&(r.addedTo=addedTo)}(tabsterOnElement.root,removedFrom,addedTo),tabsterOnElement.modalizer&&function addModalizerTarget(modalizer,removedFrom,addedTo){var m=changedModalizers[modalizer.internalId];m||(m=changedModalizers[modalizer.internalId]={modalizer:modalizer});removedFrom&&(m.removedFrom=removedFrom);addedTo&&(m.addedTo=addedTo)}(tabsterOnElement.modalizer,removedFrom,addedTo),tabsterOnElement.groupper&&function addGroupTarget(el,groupper,removedFrom,addedTo){var g=changedGrouppers[groupper.id];g||(g=changedGrouppers[groupper.id]={groupper:groupper});removedFrom&&(g.removedFrom=removedFrom);addedTo&&(g.addedTo=addedTo)}(0,tabsterOnElement.groupper,removedFrom,addedTo),tabsterOnElement.observed&&function addObservedElementTarget(element,removedFrom,addedTo){if(!doc.defaultView)return;var uid=getElementUId(tabster.getWindow,element),e=changedObservedElements[uid];e||(e=changedObservedElements[uid]={element:element});removedFrom&&(e.removedFrom=removedFrom);addedTo&&(e.addedTo=addedTo)}(element,removedFrom,addedTo)):element.getAttribute(TabsterAttributeName)&&updateTabsterByAttribute(tabster,element),NodeFilter.FILTER_SKIP}}));return observer.observe(doc,{childList:!0,subtree:!0,attributes:!0,attributeFilter:[TabsterAttributeName]}),function(){observer.disconnect()}}function dispatchMutationEvent(target,details){var event=document.createEvent("HTMLEvents");event.initEvent(MUTATION_EVENT_NAME,!0,!0),event.details=details,target.dispatchEvent(event)}function Root_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function Root_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function Root_createClass(Constructor,protoProps,staticProps){return protoProps&&Root_defineProperties(Constructor.prototype,protoProps),staticProps&&Root_defineProperties(Constructor,staticProps),Constructor}var Root_Root=function(){function Root(element,tabster,win,forgetFocusedGrouppers,basic){Root_classCallCheck(this,Root),this.uid=void 0,this._element=void 0,this._tabster=void 0,this._win=void 0,this._basic=void 0,this._dummyInputFirst=void 0,this._dummyInputLast=void 0,this._forgetFocusedGrouppers=void 0,this.uid=getElementUId(win,element),this._element=new WeakHTMLElement(win,element),this._tabster=tabster,this._win=win,this._basic=basic||{},this._forgetFocusedGrouppers=forgetFocusedGrouppers,this._dummyInputFirst={isFirst:!0},this._dummyInputLast={isFirst:!1},this._createDummyInput(this._dummyInputFirst),this._createDummyInput(this._dummyInputLast),this._add(),this._addDummyInputs(),setTabsterOnElement(this._tabster,element,{root:this})}return Root_createClass(Root,[{key:"dispose",value:function dispose(){this._remove();var dif=this._dummyInputFirst;dif&&(this._disposeDummyInput(dif),delete this._dummyInputFirst);var dil=this._dummyInputLast;dil&&(this._disposeDummyInput(dil),delete this._dummyInputLast);var rootElement=this._element.get();rootElement&&setTabsterOnElement(this._tabster,rootElement,{root:void 0}),this._forgetFocusedGrouppers=function(){}}},{key:"setProps",value:function setProps(basic){basic?this._basic=Object.assign({},this._basic,basic):null===basic&&(this._basic={})}},{key:"getBasicProps",value:function getBasicProps(){return this._basic}},{key:"getElement",value:function getElement(){return this._element.get()}},{key:"updateDummyInputs",value:function updateDummyInputs(){this._addDummyInputs()}},{key:"moveOutWithDefaultAction",value:function moveOutWithDefaultAction(backwards){var _this$_dummyInputFirs,_this$_dummyInputLast;null!==(_this$_dummyInputFirs=this._dummyInputFirst)&&void 0!==_this$_dummyInputFirs&&_this$_dummyInputFirs.input&&null!==(_this$_dummyInputLast=this._dummyInputLast)&&void 0!==_this$_dummyInputLast&&_this$_dummyInputLast.input&&(backwards?(this._dummyInputFirst.shouldMoveOut=!0,nativeFocus(this._dummyInputFirst.input)):(this._dummyInputLast.shouldMoveOut=!0,nativeFocus(this._dummyInputLast.input)))}},{key:"_add",value:function _add(){0}},{key:"_remove",value:function _remove(){this._removeDummyInputs()}},{key:"_createDummyInput",value:function _createDummyInput(props){var _this=this;if(!props.input){var input=this._win().document.createElement("div");input.tabIndex=0,input.setAttribute("role","none"),input.setAttribute(TabsterDummyInputAttributeName,""),input.setAttribute("aria-hidden","true");var style=input.style;style.position="fixed",style.width=style.height="1px",style.left=style.top="-100500px",style.opacity="0",style.zIndex="-1",function makeFocusIgnored(element){element.__shouldIgnoreFocus=!0}(input),props.input=input,props.focusin=function(e){if(props.shouldMoveOut);else{KeyboardNavigation_KeyboardNavigationState.setVal(_this._tabster.keyboardNavigation,!0),_this._forgetFocusedGrouppers();var toFocus,_props$input,element=_this._element.get();if(toFocus=element?props.isFirst?_this._tabster.focusable.findFirst(element):_this._tabster.focusable.findLast(element):null)_this._tabster.focusedElement.focus(toFocus);else null===(_props$input=props.input)||void 0===_props$input||_props$input.blur()}},props.focusout=function(e){props.shouldMoveOut=!1},input.addEventListener("focusin",props.focusin),input.addEventListener("focusout",props.focusout)}}},{key:"_disposeDummyInput",value:function _disposeDummyInput(props){var input=props.input;if(input){delete props.input;var fi=props.focusin;fi&&(input.removeEventListener("focusin",fi),delete props.focusin);var fo=props.focusout;fo&&(input.removeEventListener("focusout",fo),delete props.focusout)}}},{key:"_addDummyInputs",value:function _addDummyInputs(){var _this$_dummyInputFirs2,_this$_dummyInputLast2,element=this._element.get(),dif=null===(_this$_dummyInputFirs2=this._dummyInputFirst)||void 0===_this$_dummyInputFirs2?void 0:_this$_dummyInputFirs2.input,dil=null===(_this$_dummyInputLast2=this._dummyInputLast)||void 0===_this$_dummyInputLast2?void 0:_this$_dummyInputLast2.input;if(element&&dif&&dil){element.lastElementChild!==dil&&element.appendChild(dil);var firstElementChild=element.firstElementChild;firstElementChild&&firstElementChild!==dif&&element.insertBefore(dif,firstElementChild)}}},{key:"_removeDummyInputs",value:function _removeDummyInputs(){var _this$_dummyInputFirs3,_this$_dummyInputLast3,dif=null===(_this$_dummyInputFirs3=this._dummyInputFirst)||void 0===_this$_dummyInputFirs3?void 0:_this$_dummyInputFirs3.input,dil=null===(_this$_dummyInputLast3=this._dummyInputLast)||void 0===_this$_dummyInputLast3?void 0:_this$_dummyInputLast3.input;null!=dif&&dif.parentElement&&dif.parentElement.removeChild(dif),null!=dil&&dil.parentElement&&dil.parentElement.removeChild(dil)}}]),Root}(),Root_RootAPI=function(){function RootAPI(tabster,forgetFocusedGrouppers,autoRoot){var _this2=this;Root_classCallCheck(this,RootAPI),this._tabster=void 0,this._win=void 0,this._initTimer=void 0,this._forgetFocusedGrouppers=void 0,this._unobserve=void 0,this._autoRoot=void 0,this._autoRootInstance=void 0,this.rootById={},this._init=function(){_this2._initTimer=void 0,_this2._win().document.addEventListener(MUTATION_EVENT_NAME,_this2._onMutation),_this2._unobserve=function observeMutationEvents(getWindow){var handler=function handler(e){var root=e.details.root,tabster=getWindow().__tabsterInstance;tabster&&root&&(e.details.removed?delete tabster.root.rootById[root.uid]:tabster.root.rootById[root.uid]=root)};return getWindow().document.addEventListener(MUTATION_EVENT_NAME,handler),function(){getWindow().document.removeEventListener(MUTATION_EVENT_NAME,handler)}}(_this2._win)},this._onMutation=function(e){var details=e.details,root=details.root;root&&(details.removed?details.isMutation&&root.dispose():root.getElement()===e.target&&root.updateDummyInputs())},this._tabster=tabster,this._win=tabster.getWindow,this._forgetFocusedGrouppers=forgetFocusedGrouppers,this._initTimer=this._win().setTimeout(this._init,0),this._autoRoot=autoRoot}return Root_createClass(RootAPI,[{key:"dispose",value:function dispose(){var win=this._win();this._autoRootInstance&&(this._autoRootInstance.dispose(),delete this._autoRootInstance,delete this._autoRoot),this._initTimer&&(win.clearTimeout(this._initTimer),this._initTimer=void 0),win.document.removeEventListener(MUTATION_EVENT_NAME,this._onMutation),this._unobserve&&(this._unobserve(),delete this._unobserve),this._forgetFocusedGrouppers=function(){},this.rootById={}}},{key:"add",value:function add(element,basic){var tabsterOnElement=getTabsterOnElement(this._tabster,element);if(!tabsterOnElement||!tabsterOnElement.root){for(var root=new Root_Root(element,this._tabster,this._win,this._forgetFocusedGrouppers,basic),n=[],i=element;i;i=i.parentElement)n.push(i);dispatchMutationEvent(element,{root:root})}}},{key:"remove",value:function remove(element){var tabsterOnElement=getTabsterOnElement(this._tabster,element),root=tabsterOnElement&&tabsterOnElement.root;root&&(dispatchMutationEvent(element,{root:root,removed:!0}),root.dispose())}},{key:"setProps",value:function setProps(element,basic){var tabsterOnElement=getTabsterOnElement(this._tabster,element);tabsterOnElement&&tabsterOnElement.root&&tabsterOnElement.root.setProps(basic)}}],[{key:"dispose",value:function dispose(instance){instance.dispose()}},{key:"getRootByUId",value:function getRootByUId(getWindow,id){var tabster=getWindow().__tabsterInstance;return tabster&&tabster.root.rootById[id]}},{key:"getTabsterContext",value:function getTabsterContext(tabster,element){var options=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(element.ownerDocument){for(var root,modalizer,groupper,mover,moverOptions,isGroupperFirst,isRtl=!1,curElement=element;curElement&&(!root||options.checkRtl);){var _tabsterOnElement$foc,tabsterOnElement=getTabsterOnElement(tabster,curElement);if(tabsterOnElement){!groupper&&tabsterOnElement.groupper&&(groupper=tabsterOnElement.groupper);var moverOnElement=null===(_tabsterOnElement$foc=tabsterOnElement.focusable)||void 0===_tabsterOnElement$foc?void 0:_tabsterOnElement$foc.mover;void 0!==moverOnElement&&void 0===moverOptions&&((moverOptions=moverOnElement).navigationType!==MoverKeys.Arrows&&moverOptions.navigationType!==MoverKeys.Both||(mover=curElement,isGroupperFirst=!!groupper)),!modalizer&&tabsterOnElement.modalizer&&(modalizer=tabsterOnElement.modalizer),tabsterOnElement.root&&(root=tabsterOnElement.root),"rtl"===curElement.getAttribute("dir")&&(isRtl=!0),curElement=curElement.parentElement}else curElement=curElement.parentElement}if(!root&&tabster.root._autoRoot){var rootAPI=tabster.root;if(!rootAPI._autoRootInstance){var _element$ownerDocumen,body=null===(_element$ownerDocumen=element.ownerDocument)||void 0===_element$ownerDocumen?void 0:_element$ownerDocumen.body;body&&(rootAPI._autoRootInstance=new Root_Root(body,rootAPI._tabster,rootAPI._win,rootAPI._forgetFocusedGrouppers,rootAPI._autoRoot))}root=rootAPI._autoRootInstance}return root?{root:root,modalizer:modalizer,groupper:groupper,mover:mover,moverOptions:moverOptions,isGroupperFirst:isGroupperFirst,isRtl:options.checkRtl?isRtl:void 0}:void 0}}}]),RootAPI}();function Deloser_typeof(obj){return(Deloser_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function Deloser_createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function Deloser_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return Deloser_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Deloser_arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function Deloser_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function Deloser_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function Deloser_createClass(Constructor,protoProps,staticProps){return protoProps&&Deloser_defineProperties(Constructor.prototype,protoProps),staticProps&&Deloser_defineProperties(Constructor,staticProps),Constructor}function Deloser_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&Deloser_setPrototypeOf(subClass,superClass)}function Deloser_setPrototypeOf(o,p){return(Deloser_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function Deloser_createSuper(Derived){var hasNativeReflectConstruct=function Deloser_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=Deloser_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=Deloser_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return Deloser_possibleConstructorReturn(this,result)}}function Deloser_possibleConstructorReturn(self,call){return!call||"object"!==Deloser_typeof(call)&&"function"!=typeof call?function Deloser_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function Deloser_getPrototypeOf(o){return(Deloser_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function Deloser_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var DeloserItemBase=function DeloserItemBase(){Deloser_classCallCheck(this,DeloserItemBase)},Deloser_DeloserItem=function(_DeloserItemBase){Deloser_inherits(DeloserItem,_DeloserItemBase);var _resetFocus,_focusAvailable,_super=Deloser_createSuper(DeloserItem);function DeloserItem(tabster,deloser){var _this;return Deloser_classCallCheck(this,DeloserItem),(_this=_super.call(this)).uid=void 0,_this._tabster=void 0,_this._deloser=void 0,_this.uid=deloser.uid,_this._tabster=tabster,_this._deloser=deloser,_this}return Deloser_createClass(DeloserItem,[{key:"belongsTo",value:function belongsTo(deloser){return deloser===this._deloser}},{key:"unshift",value:function unshift(element){this._deloser.unshift(element)}},{key:"focusAvailable",value:(_focusAvailable=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var available;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return available=this._deloser.findAvailable(),_context.abrupt("return",!!available&&this._tabster.focusedElement.focus(available));case 2:case"end":return _context.stop()}}),_callee,this)}))),function focusAvailable(){return _focusAvailable.apply(this,arguments)})},{key:"resetFocus",value:(_resetFocus=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var getWindow;return regeneratorRuntime.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return getWindow=this._tabster.getWindow,_context2.abrupt("return",getPromise(getWindow).resolve(this._deloser.resetFocus()));case 2:case"end":return _context2.stop()}}),_callee2,this)}))),function resetFocus(){return _resetFocus.apply(this,arguments)})}]),DeloserItem}(DeloserItemBase),DeloserHistoryByRootBase=function(){function DeloserHistoryByRootBase(tabster,rootUId){Deloser_classCallCheck(this,DeloserHistoryByRootBase),this._tabster=void 0,this._history=[],this.rootUId=void 0,this._tabster=tabster,this.rootUId=rootUId}return Deloser_createClass(DeloserHistoryByRootBase,[{key:"getLength",value:function getLength(){return this._history.length}},{key:"removeDeloser",value:function removeDeloser(deloser){this._history=this._history.filter((function(c){return!c.belongsTo(deloser)}))}},{key:"hasDeloser",value:function hasDeloser(deloser){return this._history.some((function(d){return d.belongsTo(deloser)}))}}]),DeloserHistoryByRootBase}(),DeloserHistoryByRoot=function(_DeloserHistoryByRoot){Deloser_inherits(DeloserHistoryByRoot,_DeloserHistoryByRoot);var _resetFocus2,_focusAvailable2,_super2=Deloser_createSuper(DeloserHistoryByRoot);function DeloserHistoryByRoot(){return Deloser_classCallCheck(this,DeloserHistoryByRoot),_super2.apply(this,arguments)}return Deloser_createClass(DeloserHistoryByRoot,[{key:"unshiftToDeloser",value:function unshiftToDeloser(deloser,element){for(var item,i=0;i<this._history.length;i++)if(this._history[i].belongsTo(deloser)){item=this._history[i],this._history.splice(i,1);break}item||(item=new Deloser_DeloserItem(this._tabster,deloser)),item.unshift(element),this._history.unshift(item),this._history.splice(10,this._history.length-10)}},{key:"focusAvailable",value:(_focusAvailable2=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(from){var skip,_iterator,_step,i;return regeneratorRuntime.wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:skip=!!from,_iterator=Deloser_createForOfIteratorHelper(this._history),_context3.prev=2,_iterator.s();case 4:if((_step=_iterator.n()).done){_context3.next=16;break}if(i=_step.value,from&&i.belongsTo(from)&&(skip=!1),_context3.t0=!skip,!_context3.t0){_context3.next=12;break}return _context3.next=11,i.focusAvailable();case 11:_context3.t0=_context3.sent;case 12:if(!_context3.t0){_context3.next=14;break}return _context3.abrupt("return",!0);case 14:_context3.next=4;break;case 16:_context3.next=21;break;case 18:_context3.prev=18,_context3.t1=_context3.catch(2),_iterator.e(_context3.t1);case 21:return _context3.prev=21,_iterator.f(),_context3.finish(21);case 24:return _context3.abrupt("return",!1);case 25:case"end":return _context3.stop()}}),_callee3,this,[[2,18,21,24]])}))),function focusAvailable(_x){return _focusAvailable2.apply(this,arguments)})},{key:"resetFocus",value:(_resetFocus2=_asyncToGenerator(regeneratorRuntime.mark((function _callee4(from){var skip,resetQueue,_iterator2,_step2,i,_i,_Object$keys,_id;return regeneratorRuntime.wrap((function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:skip=!!from,resetQueue={},_iterator2=Deloser_createForOfIteratorHelper(this._history);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;)i=_step2.value,from&&i.belongsTo(from)&&(skip=!1),skip||resetQueue[i.uid]||(resetQueue[i.uid]=i)}catch(err){_iterator2.e(err)}finally{_iterator2.f()}_i=0,_Object$keys=Object.keys(resetQueue);case 5:if(!(_i<_Object$keys.length)){_context4.next=14;break}return _id=_Object$keys[_i],_context4.next=9,resetQueue[_id].resetFocus();case 9:if(!_context4.sent){_context4.next=11;break}return _context4.abrupt("return",!0);case 11:_i++,_context4.next=5;break;case 14:return _context4.abrupt("return",!1);case 15:case"end":return _context4.stop()}}),_callee4,this)}))),function resetFocus(_x2){return _resetFocus2.apply(this,arguments)})}]),DeloserHistoryByRoot}(DeloserHistoryByRootBase),Deloser_DeloserHistory=function(){function DeloserHistory(tabster){Deloser_classCallCheck(this,DeloserHistory),this._tabster=void 0,this._history=[],this._tabster=tabster}var _resetFocus3,_focusAvailable3;return Deloser_createClass(DeloserHistory,[{key:"dispose",value:function dispose(){this._history=[]}},{key:"process",value:function process(element){var _ctx$modalizer,_this2=this,ctx=Root_RootAPI.getTabsterContext(this._tabster,element),rootUId=ctx&&ctx.root.uid,deloser=Deloser_DeloserAPI.getDeloser(this._tabster,element);if(rootUId&&deloser){var historyByRoot=this.make(rootUId,(function(){return new DeloserHistoryByRoot(_this2._tabster,rootUId)}));return(!ctx||!ctx.modalizer||null!==(_ctx$modalizer=ctx.modalizer)&&void 0!==_ctx$modalizer&&_ctx$modalizer.isActive())&&historyByRoot.unshiftToDeloser(deloser,element),deloser}}},{key:"make",value:function make(rootUId,createInstance){for(var historyByRoot,i=0;i<this._history.length;i++){var hbr=this._history[i];if(hbr.rootUId===rootUId){historyByRoot=hbr,this._history.splice(i,1);break}}return historyByRoot||(historyByRoot=createInstance()),this._history.unshift(historyByRoot),this._history.splice(10,this._history.length-10),historyByRoot}},{key:"removeDeloser",value:function removeDeloser(deloser){this._history.forEach((function(i){i.removeDeloser(deloser)})),this._history=this._history.filter((function(i){return i.getLength()>0}))}},{key:"focusAvailable",value:(_focusAvailable3=_asyncToGenerator(regeneratorRuntime.mark((function _callee5(from){var skip,_iterator3,_step3,h;return regeneratorRuntime.wrap((function _callee5$(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:skip=!!from,_iterator3=Deloser_createForOfIteratorHelper(this._history),_context5.prev=2,_iterator3.s();case 4:if((_step3=_iterator3.n()).done){_context5.next=16;break}if(h=_step3.value,from&&h.hasDeloser(from)&&(skip=!1),_context5.t0=!skip,!_context5.t0){_context5.next=12;break}return _context5.next=11,h.focusAvailable(from);case 11:_context5.t0=_context5.sent;case 12:if(!_context5.t0){_context5.next=14;break}return _context5.abrupt("return",!0);case 14:_context5.next=4;break;case 16:_context5.next=21;break;case 18:_context5.prev=18,_context5.t1=_context5.catch(2),_iterator3.e(_context5.t1);case 21:return _context5.prev=21,_iterator3.f(),_context5.finish(21);case 24:return _context5.abrupt("return",!1);case 25:case"end":return _context5.stop()}}),_callee5,this,[[2,18,21,24]])}))),function focusAvailable(_x3){return _focusAvailable3.apply(this,arguments)})},{key:"resetFocus",value:(_resetFocus3=_asyncToGenerator(regeneratorRuntime.mark((function _callee6(from){var skip,_iterator4,_step4,h;return regeneratorRuntime.wrap((function _callee6$(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:skip=!!from,_iterator4=Deloser_createForOfIteratorHelper(this._history),_context6.prev=2,_iterator4.s();case 4:if((_step4=_iterator4.n()).done){_context6.next=16;break}if(h=_step4.value,from&&h.hasDeloser(from)&&(skip=!1),_context6.t0=!skip,!_context6.t0){_context6.next=12;break}return _context6.next=11,h.resetFocus(from);case 11:_context6.t0=_context6.sent;case 12:if(!_context6.t0){_context6.next=14;break}return _context6.abrupt("return",!0);case 14:_context6.next=4;break;case 16:_context6.next=21;break;case 18:_context6.prev=18,_context6.t1=_context6.catch(2),_iterator4.e(_context6.t1);case 21:return _context6.prev=21,_iterator4.f(),_context6.finish(21);case 24:return _context6.abrupt("return",!1);case 25:case"end":return _context6.stop()}}),_callee6,this,[[2,18,21,24]])}))),function resetFocus(_x4){return _resetFocus3.apply(this,arguments)})}]),DeloserHistory}();function buildElementSelector(element,withClass,withIndex){var selector=[],escapeRegExp=/(:|\.|\[|\]|,|=|@)/g;element.id&&selector.push("#"+element.id.replace(escapeRegExp,"\\$1")),!1!==withClass&&element.className&&element.className.split(" ").forEach((function(cls){(cls=cls.trim())&&selector.push("."+cls.replace(escapeRegExp,"\\$1"))}));var el,index=0;if(!1!==withIndex&&0===selector.length){for(el=element;el;)index++,el=el.previousElementSibling;selector.unshift(":nth-child("+index+")")}return selector.unshift(element.tagName.toLowerCase()),selector.join("")}var Deloser_Deloser=function(){function Deloser(_element,tabster,getWindow,basic,extended){var _this3=this;Deloser_classCallCheck(this,Deloser),this.uid=void 0,this._win=void 0,this._tabster=void 0,this._basic=void 0,this._extended=void 0,this._isActive=!1,this._history=[[]],this._snapshotIndex=0,this._element=void 0,this.isActive=function(){return _this3._isActive},this.setSnapshot=function(index){_this3._snapshotIndex=index,_this3._history.length>index+1&&_this3._history.splice(index+1,_this3._history.length-index-1),_this3._history[index]||(_this3._history[index]=[])},this.focusFirst=function(){var e=_this3._element.get();return!!e&&_this3._tabster.focusedElement.focusFirst(e)},this.focusDefault=function(){var e=_this3._element.get();return!!e&&_this3._tabster.focusedElement.focusDefault(e)},this.resetFocus=function(){var e=_this3._element.get();return!!e&&_this3._tabster.focusedElement.resetFocus(e)},this.clearHistory=function(preserveExisting){var element=_this3._element.get();_this3._history[_this3._snapshotIndex]=element?_this3._history[_this3._snapshotIndex].filter((function(we){var e=we.get();return!(!e||!preserveExisting)&&element.contains(e)})):[]},this.uid=getElementUId(getWindow,_element),this._win=getWindow,this._tabster=tabster,this._element=new WeakHTMLElement(getWindow,_element),this._basic=basic||{},this._extended=extended||{}}return Deloser_createClass(Deloser,[{key:"setProps",value:function setProps(basic,extended){basic?this._basic=Object.assign({},this._basic,basic):null===basic&&(this._basic={}),extended?this._extended=Object.assign({},this._extended,extended):null===extended&&(this._extended={})}},{key:"getBasicProps",value:function getBasicProps(){return this._basic}},{key:"move",value:function move(newContainer){this._remove(),this._element=new WeakHTMLElement(this._win,newContainer)}},{key:"dispose",value:function dispose(){this._remove(),this._isActive=!1,this._snapshotIndex=0,this._basic={},this._extended={},this._history=[]}},{key:"setActive",value:function setActive(active){this._isActive=active}},{key:"getActions",value:function getActions(){return{focusDefault:this.focusDefault,focusFirst:this.focusFirst,resetFocus:this.resetFocus,clearHistory:this.clearHistory,setSnapshot:this.setSnapshot,isActive:this.isActive}}},{key:"unshift",value:function unshift(element){var cur=this._history[this._snapshotIndex];for((cur=this._history[this._snapshotIndex]=cur.filter((function(we){var e=we.get();return e&&e!==element}))).unshift(new WeakHTMLElement(this._win,element,function buildSelector(element){if(documentContains(element.ownerDocument,element)){for(var selector=[buildElementSelector(element)],el=element.parentElement;el;){var isBody="BODY"===el.tagName;if(selector.unshift(buildElementSelector(el,!1,!isBody)),isBody)break;el=el.parentElement}return selector.join(" ")}}(element)));cur.length>10;)cur.pop()}},{key:"findAvailable",value:function findAvailable(){var element=this._element.get();if(!element||!this._tabster.focusable.isVisible(element))return null;var restoreFocusOrder=this._basic.restoreFocusOrder,available=null,ctx=Root_RootAPI.getTabsterContext(this._tabster,element);if(!ctx)return null;var root=ctx.root,rootElement=root.getElement();if(!rootElement)return null;if(void 0===restoreFocusOrder&&(restoreFocusOrder=root.getBasicProps().restoreFocusOrder),restoreFocusOrder===RestoreFocusOrders.RootDefault&&(available=this._tabster.focusable.findDefault(rootElement)),available||restoreFocusOrder!==RestoreFocusOrders.RootFirst||(available=this._findFirst(rootElement)),available)return available;var availableInHistory=this._findInHistory(),availableDefault=this._tabster.focusable.findDefault(element),availableFirst=this._findFirst(element);return availableInHistory&&restoreFocusOrder===RestoreFocusOrders.History?availableInHistory:availableDefault&&restoreFocusOrder===RestoreFocusOrders.DeloserDefault?availableDefault:availableFirst&&restoreFocusOrder===RestoreFocusOrders.DeloserFirst?availableFirst:availableDefault||availableInHistory||availableFirst||null}},{key:"customFocusLostHandler",value:function customFocusLostHandler(element){return!!this._extended.onFocusLost&&this._extended.onFocusLost(element,this.getActions())}},{key:"getElement",value:function getElement(){return this._element.get()}},{key:"_findInHistory",value:function _findInHistory(){var cur=this._history[this._snapshotIndex].slice(0);this.clearHistory(!0);for(var i=0;i<cur.length;i++){var we=cur[i],e=we.get(),element=this._element.get();if(e&&element&&element.contains(e)){if(this._tabster.focusable.isFocusable(e))return e}else if(!this._basic.noSelectorCheck){var selector=we.getData();if(selector&&element){var els=void 0;try{els=element.ownerDocument.querySelectorAll(selector)}catch(e){0;continue}for(var _i2=0;_i2<els.length;_i2++){var el=els[_i2];if(el&&this._tabster.focusable.isFocusable(el))return el}}}}return null}},{key:"_findFirst",value:function _findFirst(element){if(this._tabster.keyboardNavigation.isNavigatingWithKeyboard()){var first=this._tabster.focusable.findFirst(element);if(first)return first}return null}},{key:"_remove",value:function _remove(){0}}]),Deloser}(),Deloser_DeloserAPI=function(){function DeloserAPI(tabster,props){var _this4=this;Deloser_classCallCheck(this,DeloserAPI),this._tabster=void 0,this._win=void 0,this._initTimer=void 0,this._inDeloser=!1,this._curDeloser=void 0,this._history=void 0,this._restoreFocusTimer=void 0,this._isRestoringFocus=!1,this._isPaused=!1,this._autoDeloser=void 0,this._autoDeloserInstance=void 0,this._init=function(){_this4._initTimer=void 0,_this4._tabster.focusedElement.subscribe(_this4._onFocus)},this._onFocus=function(e){if(_this4._restoreFocusTimer&&(_this4._win().clearTimeout(_this4._restoreFocusTimer),_this4._restoreFocusTimer=void 0),e){var deloser=_this4._history.process(e);deloser?_this4._activate(deloser):_this4._deactivate()}else _this4._scheduleRestoreFocus()},this._tabster=tabster,this._win=tabster.getWindow,this._history=new Deloser_DeloserHistory(tabster),this._initTimer=this._win().setTimeout(this._init,0);var autoDeloser=null==props?void 0:props.autoDeloser;autoDeloser&&(this._autoDeloser=autoDeloser)}return Deloser_createClass(DeloserAPI,[{key:"dispose",value:function dispose(){var win=this._win();this._initTimer&&(win.clearTimeout(this._initTimer),this._initTimer=void 0),this._restoreFocusTimer&&(win.clearTimeout(this._restoreFocusTimer),this._restoreFocusTimer=void 0),this._autoDeloserInstance&&(this._autoDeloserInstance.dispose(),delete this._autoDeloserInstance,delete this._autoDeloser),this._tabster.focusedElement.unsubscribe(this._onFocus),this._history.dispose(),delete this._curDeloser}},{key:"getActions",value:function getActions(element){for(var e=element;e;e=e.parentElement){var tabsterOnElement=getTabsterOnElement(this._tabster,e);if(tabsterOnElement&&tabsterOnElement.deloser)return tabsterOnElement.deloser.getActions()}}},{key:"add",value:function add(element,basic,extended){var _this$_tabster$focuse,tabsterOnElement=getTabsterOnElement(this._tabster,element);if(!tabsterOnElement||!tabsterOnElement.deloser){var deloser=new Deloser_Deloser(element,this._tabster,this._win,basic,extended);setTabsterOnElement(this._tabster,element,{deloser:deloser}),element.contains(null!==(_this$_tabster$focuse=this._tabster.focusedElement.getFocusedElement())&&void 0!==_this$_tabster$focuse?_this$_tabster$focuse:null)&&this._activate(deloser)}}},{key:"remove",value:function remove(element){var tabsterOnElement=getTabsterOnElement(this._tabster,element);if(tabsterOnElement){var deloser=tabsterOnElement.deloser;deloser&&(this._history.removeDeloser(deloser),deloser.isActive()&&this._scheduleRestoreFocus(),deloser.dispose(),setTabsterOnElement(this._tabster,element,{deloser:void 0}))}}},{key:"move",value:function move(from,to){var tabsterOnElementFrom=getTabsterOnElement(this._tabster,from);tabsterOnElementFrom&&tabsterOnElementFrom.deloser&&(tabsterOnElementFrom.deloser.move(to),setTabsterOnElement(this._tabster,to,{deloser:tabsterOnElementFrom.deloser}),setTabsterOnElement(this._tabster,from,{deloser:void 0}))}},{key:"pause",value:function pause(){this._isPaused=!0,this._restoreFocusTimer&&(this._win().clearTimeout(this._restoreFocusTimer),this._restoreFocusTimer=void 0)}},{key:"resume",value:function resume(restore){this._isPaused=!1,restore&&this._scheduleRestoreFocus()}},{key:"setProps",value:function setProps(element,basic,extended){var tabsterOnElement=getTabsterOnElement(this._tabster,element);tabsterOnElement&&tabsterOnElement.deloser&&tabsterOnElement.deloser.setProps(basic,extended)}},{key:"_activate",value:function _activate(deloser){var curDeloser=this._curDeloser;curDeloser!==deloser&&(this._inDeloser=!0,null==curDeloser||curDeloser.setActive(!1),deloser.setActive(!0),this._curDeloser=deloser)}},{key:"_deactivate",value:function _deactivate(){var _this$_curDeloser;this._inDeloser=!1,null===(_this$_curDeloser=this._curDeloser)||void 0===_this$_curDeloser||_this$_curDeloser.setActive(!1),this._curDeloser=void 0}},{key:"_scheduleRestoreFocus",value:function _scheduleRestoreFocus(force){var _this5=this;if(!this._isPaused&&!this._isRestoringFocus){var restoreFocus=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee7(){var lastFocused,curDeloser,el;return regeneratorRuntime.wrap((function _callee7$(_context7){for(;;)switch(_context7.prev=_context7.next){case 0:if(_this5._restoreFocusTimer=void 0,lastFocused=_this5._tabster.focusedElement.getLastFocusedElement(),force||!(_this5._isRestoringFocus||!_this5._inDeloser||null!=lastFocused&&lastFocused.offsetParent)){_context7.next=4;break}return _context7.abrupt("return");case 4:if(!(curDeloser=_this5._curDeloser)){_context7.next=11;break}if(!lastFocused||!curDeloser.customFocusLostHandler(lastFocused)){_context7.next=8;break}return _context7.abrupt("return");case 8:if(!(el=curDeloser.findAvailable())||!_this5._tabster.focusedElement.focus(el)){_context7.next=11;break}return _context7.abrupt("return");case 11:return _this5._deactivate(),_this5._isRestoringFocus=!0,_context7.next=15,_this5._history.focusAvailable(null);case 15:if(_context7.sent){_context7.next=18;break}return _context7.next=18,_this5._history.resetFocus(null);case 18:_this5._isRestoringFocus=!1;case 19:case"end":return _context7.stop()}}),_callee7)})));return function restoreFocus(){return _ref.apply(this,arguments)}}();force?restoreFocus():this._restoreFocusTimer=this._win().setTimeout(restoreFocus,100)}}}],[{key:"dispose",value:function dispose(instance){instance.dispose()}},{key:"getDeloser",value:function getDeloser(tabster,element){for(var e=element;e;e=e.parentElement){var tabsterOnElement=getTabsterOnElement(tabster,e);if(tabsterOnElement&&tabsterOnElement.deloser)return tabsterOnElement.deloser}var tabsteri=tabster,deloserAPI=tabsteri.deloser&&tabsteri.deloser;if(deloserAPI){if(deloserAPI._autoDeloserInstance)return deloserAPI._autoDeloserInstance;var autoDeloserProps=deloserAPI._autoDeloser;if(!deloserAPI._autoDeloserInstance&&autoDeloserProps){var _element$ownerDocumen,body=null===(_element$ownerDocumen=element.ownerDocument)||void 0===_element$ownerDocumen?void 0:_element$ownerDocumen.body;body&&(deloserAPI._autoDeloserInstance=new Deloser_Deloser(body,tabster,deloserAPI._win,autoDeloserProps,autoDeloserProps))}return deloserAPI._autoDeloserInstance}}},{key:"getHistory",value:function getHistory(instance){return instance._history}},{key:"forceRestoreFocus",value:function forceRestoreFocus(instance){instance._scheduleRestoreFocus(!0)}}]),DeloserAPI}();function CrossOrigin_typeof(obj){return(CrossOrigin_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function CrossOrigin_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function CrossOrigin_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){CrossOrigin_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){CrossOrigin_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function CrossOrigin_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function CrossOrigin_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function CrossOrigin_createClass(Constructor,protoProps,staticProps){return protoProps&&CrossOrigin_defineProperties(Constructor.prototype,protoProps),staticProps&&CrossOrigin_defineProperties(Constructor,staticProps),Constructor}function CrossOrigin_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&CrossOrigin_setPrototypeOf(subClass,superClass)}function CrossOrigin_setPrototypeOf(o,p){return(CrossOrigin_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function CrossOrigin_createSuper(Derived){var hasNativeReflectConstruct=function CrossOrigin_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=CrossOrigin_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=CrossOrigin_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return CrossOrigin_possibleConstructorReturn(this,result)}}function CrossOrigin_possibleConstructorReturn(self,call){return!call||"object"!==CrossOrigin_typeof(call)&&"function"!=typeof call?function CrossOrigin_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function CrossOrigin_getPrototypeOf(o){return(CrossOrigin_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}var CrossOriginTransactionTypes_FocusElement=2,CrossOriginTransactionTypes_GetElement=4,CrossOrigin_CrossOriginTransaction=function(){function CrossOriginTransaction(tabster,getOwner,knownTargets,value,timeout,sentTo,targetId,sendUp){var _this3=this;CrossOrigin_classCallCheck(this,CrossOriginTransaction),this.type=void 0,this.id=void 0,this.beginData=void 0,this.timeout=void 0,this.tabster=void 0,this.endData=void 0,this.owner=void 0,this.ownerId=void 0,this.sendUp=void 0,this._promise=void 0,this._resolve=void 0,this._reject=void 0,this._knownTargets=void 0,this._sentTo=void 0,this.targetId=void 0,this._inProgress={},this._isDone=!1,this._isSelfResponding=!1,this._sentCount=0,this.tabster=tabster,this.owner=getOwner,this.ownerId=getWindowUId(getOwner()),this.id=getUId(getOwner()),this.beginData=value,this._knownTargets=knownTargets,this._sentTo=sentTo||_defineProperty({},this.ownerId,!0),this.targetId=targetId,this.sendUp=sendUp,this.timeout=timeout,this._promise=new(getPromise(getOwner))((function(resolve,reject){_this3._resolve=resolve,_this3._reject=reject}))}return CrossOrigin_createClass(CrossOriginTransaction,[{key:"getTargets",value:function getTargets(knownTargets){return"up"===this.targetId?this.sendUp?_defineProperty({},"up",{send:this.sendUp}):null:this.targetId?knownTargets[this.targetId]?_defineProperty({},this.targetId,{send:knownTargets[this.targetId].send}):null:0===Object.keys(knownTargets).length&&this.sendUp?_defineProperty({},"up",{send:this.sendUp}):Object.keys(knownTargets).length>0?knownTargets:null}},{key:"begin",value:function begin(selfResponse){var _this4=this,targets=this.getTargets(this._knownTargets),sentTo=Object.assign({},this._sentTo);if(targets)for(var _i=0,_Object$keys=Object.keys(targets);_i<_Object$keys.length;_i++){sentTo[_Object$keys[_i]]=!0}var data={transaction:this.id,type:this.type,isResponse:!1,timestamp:Date.now(),owner:this.ownerId,sentto:sentTo,timeout:this.timeout,beginData:this.beginData};if(this.targetId&&(data.target=this.targetId),selfResponse&&(this._isSelfResponding=!0,selfResponse(data).then((function(value){_this4._isSelfResponding=!1,void 0!==value&&(_this4.endData||(_this4.endData=value)),(_this4.endData||0===_this4._sentCount)&&_this4.end()}))),targets)for(var _i2=0,_Object$keys2=Object.keys(targets);_i2<_Object$keys2.length;_i2++){var _id2=_Object$keys2[_i2];_id2 in this._sentTo||this._send(targets[_id2].send,_id2,data)}return 0!==this._sentCount||this._isSelfResponding||this.end(),this._promise}},{key:"_send",value:function _send(send,targetId,data){void 0===this._inProgress[targetId]&&(this._inProgress[targetId]=!0,this._sentCount++,send(data))}},{key:"end",value:function end(error){this._isDone||(this._isDone=!0,void 0===this.endData&&error?this._reject&&this._reject(error):this._resolve&&this._resolve(this.endData))}},{key:"onResponse",value:function onResponse(data){var endData=data.endData;void 0===endData||this.endData||(this.endData=endData);var inProgressId="up"===data.target?"up":data.owner;this._inProgress[inProgressId]&&(this._inProgress[inProgressId]=!1,this._sentCount--,(this.endData||0===this._sentCount&&!this._isSelfResponding)&&this.end())}}]),CrossOriginTransaction}(),FocusElementTransaction=function(_CrossOriginTransacti2){CrossOrigin_inherits(FocusElementTransaction,_CrossOriginTransacti2);var _makeResponse2,_super4=CrossOrigin_createSuper(FocusElementTransaction);function FocusElementTransaction(){var _this6;CrossOrigin_classCallCheck(this,FocusElementTransaction);for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++)args[_key2]=arguments[_key2];return(_this6=_super4.call.apply(_super4,[this].concat(args))).type=CrossOriginTransactionTypes_FocusElement,_this6}return CrossOrigin_createClass(FocusElementTransaction,null,[{key:"shouldForward",value:function shouldForward(tabster,data,getOwner){var el=CrossOrigin_GetElementTransaction.findElement(tabster,getOwner,data.beginData);return!el||!tabster.focusable.isFocusable(el)}},{key:"makeResponse",value:(_makeResponse2=CrossOrigin_asyncToGenerator(regeneratorRuntime.mark((function _callee6(tabster,data,getOwner,ownerId,transactions,forwardResult){var el;return regeneratorRuntime.wrap((function _callee6$(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:if(el=CrossOrigin_GetElementTransaction.findElement(tabster,getOwner,data.beginData),_context6.t0=!!el&&tabster.focusedElement.focus(el),_context6.t0){_context6.next=6;break}return _context6.next=5,forwardResult;case 5:_context6.t0=!!_context6.sent;case 6:return _context6.abrupt("return",_context6.t0);case 7:case"end":return _context6.stop()}}),_callee6)}))),function makeResponse(_x2,_x3,_x4,_x5,_x6,_x7){return _makeResponse2.apply(this,arguments)})}]),FocusElementTransaction}(CrossOrigin_CrossOriginTransaction);FocusElementTransaction.shouldSelfRespond=function(){return!0};var CrossOrigin_GetElementTransaction=function(_CrossOriginTransacti4){CrossOrigin_inherits(GetElementTransaction,_CrossOriginTransacti4);var _makeResponse4,_super6=CrossOrigin_createSuper(GetElementTransaction);function GetElementTransaction(){var _this8;CrossOrigin_classCallCheck(this,GetElementTransaction);for(var _len4=arguments.length,args=new Array(_len4),_key4=0;_key4<_len4;_key4++)args[_key4]=arguments[_key4];return(_this8=_super6.call.apply(_super6,[this].concat(args))).type=CrossOriginTransactionTypes_GetElement,_this8}return CrossOrigin_createClass(GetElementTransaction,null,[{key:"findElement",value:function findElement(tabster,getOwner,data){var element;if(data&&(!data.ownerId||data.ownerId===getWindowUId(getOwner())))if(data.id){if((element=getOwner().document.getElementById(data.id))&&data.rootId){var ctx=Root_RootAPI.getTabsterContext(tabster,element);if(!ctx||ctx.root.uid!==data.rootId)return null}}else if(data.uid){var ref=getInstanceContext(getOwner).elementByUId[data.uid];element=ref&&ref.get()}else data.observedName&&(element=tabster.observedElement.getElement(data.observedName));return element||null}},{key:"getElementData",value:function getElementData(tabster,element,getOwner,context,ownerUId){var deloser=Deloser_DeloserAPI.getDeloser(tabster,element),ctx=Root_RootAPI.getTabsterContext(tabster,element),tabsterOnElement=getTabsterOnElement(tabster,element),observed=tabsterOnElement&&tabsterOnElement.observed;return{uid:getElementUId(getOwner,element),ownerUId:ownerUId,id:element.id||void 0,rootUId:ctx?ctx.root.uid:void 0,deloserUId:deloser?getDeloserUID(getOwner,context,deloser):void 0,observedName:observed&&observed.name,observedDetails:observed&&observed.details}}},{key:"makeResponse",value:(_makeResponse4=CrossOrigin_asyncToGenerator(regeneratorRuntime.mark((function _callee14(tabster,data,getOwner,ownerUId,transactions,forwardResult){var beginData,element,dataOut,name,_timeout,accessibility,e;return regeneratorRuntime.wrap((function _callee14$(_context14){for(;;)switch(_context14.prev=_context14.next){case 0:if(void 0===(beginData=data.beginData)?element=tabster.focusedElement.getFocusedElement():beginData&&(element=GetElementTransaction.findElement(tabster,getOwner,beginData)||void 0),element||!beginData){_context14.next=11;break}if(name=beginData.observedName,_timeout=data.timeout,accessibility=beginData.accessibility,!name||!_timeout){_context14.next=11;break}return _context14.next=9,new(getPromise(getOwner))((function(resolve,reject){var isWaitElementResolved=!1,isForwardResolved=!1,isResolved=!1;tabster.observedElement.waitElement(name,_timeout,accessibility).then((function(value){isWaitElementResolved=!0,isResolved||!value&&!isForwardResolved||(isResolved=!0,resolve({element:value}))})),forwardResult.then((function(value){isForwardResolved=!0,isResolved||!value&&!isWaitElementResolved||(isResolved=!0,resolve({crossOrigin:value}))}))}));case 9:(e=_context14.sent).element?element=e.element:e.crossOrigin&&(dataOut=e.crossOrigin);case 11:return _context14.abrupt("return",element?GetElementTransaction.getElementData(tabster,element,getOwner,transactions.ctx,ownerUId):dataOut);case 12:case"end":return _context14.stop()}}),_callee14)}))),function makeResponse(_x36,_x37,_x38,_x39,_x40,_x41){return _makeResponse4.apply(this,arguments)})}]),GetElementTransaction}(CrossOrigin_CrossOriginTransaction);CrossOrigin_GetElementTransaction.shouldSelfRespond=function(){return!0};function getDeloserUID(getWindow,context,deloser){var deloserElement=deloser.getElement();if(deloserElement){var _uid=getElementUId(getWindow,deloserElement);return context.deloserByUId[_uid]||(context.deloserByUId[_uid]=deloser),_uid}}function Focusable_createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function Focusable_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return Focusable_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Focusable_arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e3){throw _e3},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e4){didErr=!0,err=_e4},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function Focusable_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function Focusable_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function Focusable_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function Focusable_createClass(Constructor,protoProps,staticProps){return protoProps&&Focusable_defineProperties(Constructor.prototype,protoProps),staticProps&&Focusable_defineProperties(Constructor,staticProps),Constructor}var _focusableSelector=["a[href]","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","*[tabindex]","*[contenteditable]"].join(", "),Focusable_lastId=0,Focusable_UberGroupper=function(){function UberGroupper(tabster,element,getWindow,current){Focusable_classCallCheck(this,UberGroupper),this._tabster=void 0,this._win=void 0,this._element=void 0,this._cur=void 0,this._current=void 0,this._prev=void 0,this._next=void 0,this._first=void 0,this._last=void 0,this._focused=void 0,this._unlimited=void 0,this._visibleGrouppers={},this._hasFullyVisibleGroupper=!1,this._prevCurrent=void 0,this._prevPrev=void 0,this._prevNext=void 0,this._prevFirst=void 0,this._prevLast=void 0,this._prevFocused=void 0,this._prevUnlimited=void 0,this._prevVisibleGrouppers={},this._onChangeTimer=void 0,this._updateVisibleTimer=void 0,this._grouppers={},this.id=void 0,this._tabster=tabster,this._win=getWindow,this._cur=current,this._element=new WeakHTMLElement(getWindow,element),this.id="fgc"+ ++Focusable_lastId,setTabsterOnElement(tabster,element,{uberGroupper:this}),UberGroupper._containers[this.id]=this}return Focusable_createClass(UberGroupper,[{key:"dispose",value:function dispose(){this._grouppers={};var win=this._win();this._updateVisibleTimer&&(win.clearTimeout(this._updateVisibleTimer),this._updateVisibleTimer=void 0),this._onChangeTimer&&(win.clearTimeout(this._onChangeTimer),this._onChangeTimer=void 0);var e=this._element.get();e&&setTabsterOnElement(this._tabster,e,{uberGroupper:void 0}),delete UberGroupper._containers[this.id]}},{key:"getElement",value:function getElement(){return this._element.get()}},{key:"addGroupper",value:function addGroupper(groupper){this._grouppers[groupper.id]=groupper,this._setFirstLast(),this._updateVisible(!0)}},{key:"removeGroupper",value:function removeGroupper(groupper){var id=groupper.id;delete this._grouppers[id],delete this._visibleGrouppers[id],delete this._prevVisibleGrouppers[id],delete this._cur.focused[id],this._current===groupper&&this._setCurrent(void 0),this._setFirstLast(),this._updateVisible(!0)}},{key:"setFocusedGroupper",value:function setFocusedGroupper(groupper){groupper!==this._focused&&(this._focused=groupper,this._processOnChange())}},{key:"setUnlimitedGroupper",value:function setUnlimitedGroupper(groupper){groupper!==this._unlimited&&(this._unlimited=groupper,this._processOnChange())}},{key:"forceUpdate",value:function forceUpdate(){this._processOnChange(!0)}},{key:"_processOnChange",value:function _processOnChange(force){var _this=this;if(!this._onChangeTimer||force){var reallyProcessOnChange=function reallyProcessOnChange(){_this._onChangeTimer=void 0;var changed=[];if(_this._prevFocused!==_this._focused){for(var _i=0,_Object$keys=Object.keys(_this._grouppers);_i<_Object$keys.length;_i++){var _id=_Object$keys[_i];changed.push(_this._grouppers[_id])}_this._focused||_this._prevFocused&&_this._prevFocused.getBasicProps().memorizeCurrent||(_this._setCurrent(void 0),_this._prev=void 0,_this._next=void 0),_this._prevFocused=_this._focused}if(_this._prevCurrent!==_this._current&&(changed.push(_this._prevCurrent),changed.push(_this._current),_this._prevCurrent=_this._current),_this._prevPrev!==_this._prev&&(changed.push(_this._prevPrev),changed.push(_this._prev),_this._prevPrev=_this._prev),_this._prevNext!==_this._next&&(changed.push(_this._prevNext),changed.push(_this._next),_this._prevNext=_this._next),_this._prevFirst!==_this._first&&(changed.push(_this._prevFirst),changed.push(_this._first),_this._prevFirst=_this._first),_this._prevLast!==_this._last&&(changed.push(_this._prevLast),changed.push(_this._last),_this._prevLast=_this._last),_this._prevUnlimited!==_this._unlimited&&(changed.push(_this._prevUnlimited),changed.push(_this._unlimited),_this._prevUnlimited=_this._unlimited),_this._visibleGrouppers!==_this._prevVisibleGrouppers){_this._hasFullyVisibleGroupper=!1;for(var _i2=0,_Object$keys2=Object.keys(_this._visibleGrouppers);_i2<_Object$keys2.length;_i2++){var _id2=_Object$keys2[_i2],isVisible=_this._visibleGrouppers[_id2];isVisible!==_this._prevVisibleGrouppers[_id2]&&changed.push(_this._grouppers[_id2]),isVisible===ElementVisibilities.Visible&&(_this._hasFullyVisibleGroupper=!0)}for(var _i3=0,_Object$keys3=Object.keys(_this._prevVisibleGrouppers);_i3<_Object$keys3.length;_i3++){var _id3=_Object$keys3[_i3];_this._visibleGrouppers[_id3]!==_this._prevVisibleGrouppers[_id3]&&changed.push(_this._grouppers[_id3])}_this._prevVisibleGrouppers=_this._visibleGrouppers}var _step,processed={},_iterator=Focusable_createForOfIteratorHelper(changed.filter((function(c){return c&&_this._grouppers[c.id]})));try{for(_iterator.s();!(_step=_iterator.n()).done;){var g=_step.value;if(g&&!processed[g.id]){processed[g.id]=!0;var onChange=g.getExtendedProps().onChange;onChange&&onChange(g.getState())}}}catch(err){_iterator.e(err)}finally{_iterator.f()}};this._onChangeTimer&&this._win().clearTimeout(this._onChangeTimer),force?reallyProcessOnChange():this._onChangeTimer=this._win().setTimeout(reallyProcessOnChange,0)}}},{key:"_setFirstLast",value:function _setFirstLast(){this._first=void 0,this._last=void 0;var element=this._element.get();if(element){for(var e=element.firstElementChild;e;e=e.nextElementSibling){var tabsterOnElement=getTabsterOnElement(this._tabster,e);if(tabsterOnElement&&tabsterOnElement.groupper&&tabsterOnElement.groupper.id in this._grouppers){this._first=tabsterOnElement.groupper;break}}for(var _e=element.lastElementChild;_e;_e=_e.previousElementSibling){var _tabsterOnElement=getTabsterOnElement(this._tabster,_e);if(_tabsterOnElement&&_tabsterOnElement.groupper&&_tabsterOnElement.groupper.id in this._grouppers){this._last=_tabsterOnElement.groupper;break}}this._processOnChange()}}},{key:"setCurrentGroupper",value:function setCurrentGroupper(groupper){var _this$_current;this._setCurrent(groupper&&groupper.id in this._grouppers?groupper:void 0),this._prev=void 0,this._next=void 0;var curElement=null===(_this$_current=this._current)||void 0===_this$_current?void 0:_this$_current.getElement();if(curElement&&curElement.parentElement===this._element.get()){for(var e=curElement.previousElementSibling;e;e=e.previousElementSibling){var tabsterOnElement=getTabsterOnElement(this._tabster,e);if(tabsterOnElement&&tabsterOnElement.groupper){this._prev=tabsterOnElement.groupper;break}}for(var _e2=curElement.nextElementSibling;_e2;_e2=_e2.nextElementSibling){var _tabsterOnElement2=getTabsterOnElement(this._tabster,_e2);if(_tabsterOnElement2&&_tabsterOnElement2.groupper){this._next=_tabsterOnElement2.groupper;break}}}this._processOnChange()}},{key:"getCurrentGroupper",value:function getCurrentGroupper(){return this._current&&this._current.id in this._grouppers?this._current:(this._setCurrent(void 0),this._current||null)}},{key:"getGroupperState",value:function getGroupperState(groupper){var props=groupper.getBasicProps(),isLimited=props.isLimited,isVisible=this._visibleGrouppers[groupper.id]||ElementVisibilities.Invisible,isCurrent=this._current?this._current===groupper:void 0;return void 0===isCurrent&&props.lookupVisibility!==ElementVisibilities.Invisible&&(isVisible===ElementVisibilities.Invisible||this._hasFullyVisibleGroupper&&isVisible===ElementVisibilities.PartiallyVisible)&&(isCurrent=!1),{isCurrent:isCurrent,isPrevious:this._prev===groupper,isNext:this._next===groupper,isFirst:this._first===groupper,isLast:this._last===groupper,isVisible:isVisible,hasFocus:this._focused===groupper,siblingHasFocus:!!this._focused&&this._focused!==groupper,siblingIsVisible:this._hasFullyVisibleGroupper,isLimited:(isLimited===GroupperFocusLimits.Limited||isLimited===GroupperFocusLimits.LimitedTrapFocus)&&this._unlimited!==groupper}}},{key:"isEmpty",value:function isEmpty(){return 0===Object.keys(this._grouppers).length}},{key:"_setCurrent",value:function _setCurrent(groupper){var cur=this._current;cur!==groupper&&(cur&&this._cur.current[cur.id]&&delete this._cur.current[cur.id],groupper&&(this._cur.current[groupper.id]=groupper),this._current=groupper)}},{key:"_updateVisible",value:function _updateVisible(updateParents){var _this2=this,element=this._element.get();if(!this._updateVisibleTimer&&element){if(updateParents)for(var e=element.parentElement;e;e=e.parentElement){var tabsterOnElement=getTabsterOnElement(this._tabster,e);tabsterOnElement&&tabsterOnElement.uberGroupper&&tabsterOnElement.uberGroupper._updateVisible(!1)}this._updateVisibleTimer=this._win().setTimeout((function(){_this2._updateVisibleTimer=void 0;for(var isChanged=!1,visibleGrouppers={},_i4=0,_Object$keys4=Object.keys(_this2._grouppers);_i4<_Object$keys4.length;_i4++){var _id4=_Object$keys4[_i4],groupperElement=_this2._grouppers[_id4].getElement(),isVisible=groupperElement?isElementVisibleInContainer(_this2._win,groupperElement,10):ElementVisibilities.Invisible,curIsVisible=_this2._visibleGrouppers[_id4]||ElementVisibilities.Invisible;isVisible!==ElementVisibilities.Invisible&&(visibleGrouppers[_id4]=isVisible),curIsVisible!==isVisible&&(isChanged=!0)}isChanged&&(_this2._prevVisibleGrouppers=_this2._visibleGrouppers,_this2._visibleGrouppers=visibleGrouppers,_this2._processOnChange())}),0)}}}],[{key:"updateVisible",value:function updateVisible(scrolled){var _step2,containers={},_iterator2=Focusable_createForOfIteratorHelper(scrolled);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;)for(var s=_step2.value,_i6=0,_Object$keys6=Object.keys(UberGroupper._containers);_i6<_Object$keys6.length;_i6++){var _id6=_Object$keys6[_i6],_container=UberGroupper._containers[_id6],containerElement=_container.getElement();containerElement&&s.contains(containerElement)&&(containers[_container.id]=_container)}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}for(var _i5=0,_Object$keys5=Object.keys(containers);_i5<_Object$keys5.length;_i5++){containers[_Object$keys5[_i5]]._updateVisible(!1)}}}]),UberGroupper}();Focusable_UberGroupper._containers={};var Focusable_Groupper=function(){function Groupper(tabster,element,getWindow,current,basic,extended){Focusable_classCallCheck(this,Groupper),this._tabster=void 0,this._win=void 0,this._cur=void 0,this._element=void 0,this._container=void 0,this._basic=void 0,this._extended=void 0,this.id=void 0,this._tabster=tabster,this._win=getWindow,this._cur=current,this._element=new WeakHTMLElement(getWindow,element),this._basic=basic||{},this._extended=extended||{},this.id="fg"+ ++Focusable_lastId,setTabsterOnElement(this._tabster,element,{groupper:this}),this.setupContainer()}return Focusable_createClass(Groupper,[{key:"dispose",value:function dispose(){this._container&&this._container.removeGroupper(this),this.setupContainer(!0);var element=this._element.get();element&&setTabsterOnElement(this._tabster,element,{groupper:void 0})}},{key:"getBasicProps",value:function getBasicProps(){return this._basic}},{key:"getExtendedProps",value:function getExtendedProps(){return this._extended}},{key:"setProps",value:function setProps(basic,extended){basic?this._basic=Object.assign({},this._basic,basic):null===basic&&(this._basic={}),extended?this._extended=Object.assign({},this._extended,extended):null===extended&&(this._extended={})}},{key:"getElement",value:function getElement(){return this._element.get()}},{key:"moveTo",value:function moveTo(newElement){this._element.get()!==newElement&&(this.setupContainer(!0),this._element=new WeakHTMLElement(this._win,newElement),this.setupContainer())}},{key:"getState",value:function getState(){return this._container?this._container.getGroupperState(this):{isCurrent:void 0,isPrevious:!1,isNext:!1,isFirst:!1,isLast:!1,isVisible:ElementVisibilities.Invisible,hasFocus:!1,siblingIsVisible:!1,siblingHasFocus:!1,isLimited:!1}}},{key:"setCurrent",value:function setCurrent(current){this._container&&this._container.setCurrentGroupper(current?this:void 0)}},{key:"isDefault",value:function isDefault(){var isDefault=this._basic.isDefault||this._extended.isDefault;return"function"==typeof isDefault?isDefault.call(this._element):isDefault}},{key:"setFocused",value:function setFocused(focused){this._container&&this._container.setFocusedGroupper(focused?this:void 0)}},{key:"setUnlimited",value:function setUnlimited(unlimited){!this._container||this._basic.isLimited!==GroupperFocusLimits.Limited&&this._basic.isLimited!==GroupperFocusLimits.LimitedTrapFocus||this._container.setUnlimitedGroupper(unlimited?this:void 0)}},{key:"forceUpdate",value:function forceUpdate(){this._container&&this._container.forceUpdate()}},{key:"setupContainer",value:function setupContainer(remove){var container,element=this._element.get(),containerElement=null==element?void 0:element.parentElement,curContainer=this._container;if(containerElement){var containerTabsterOnElement=getTabsterOnElement(this._tabster,containerElement);(container=containerTabsterOnElement&&containerTabsterOnElement.uberGroupper)||remove||(container=new Focusable_UberGroupper(this._tabster,containerElement,this._win,this._cur))}curContainer&&(remove||curContainer!==container)&&curContainer.removeGroupper(this),this._container=container,container&&!remove&&container.addGroupper(this)}}]),Groupper}(),Focusable_FocusableAPI=function(){function FocusableAPI(tabster,getWindow){var _this3=this;Focusable_classCallCheck(this,FocusableAPI),this._tabster=void 0,this._win=void 0,this._initTimer=void 0,this._scrollTimer=void 0,this._scrollTargets=[],this._cur=void 0,this._init=function(){_this3._initTimer=void 0;var win=_this3._win();win.document.addEventListener(MUTATION_EVENT_NAME,_this3._onMutation,!0),win.addEventListener("scroll",_this3._onScroll,!0),_this3._tabster.focusedElement.subscribe(_this3._onFocus)},this._onFocus=function(element){element&&_this3._updateFocusedGrouppers(element)},this._onMutation=function(e){e.target&&e.details.groupper&&e.details.groupper.setupContainer(e.details.removed)},this._onScroll=function(e){var _step3,isKnownTarget=!1,_iterator3=Focusable_createForOfIteratorHelper(_this3._scrollTargets);try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){if(_step3.value===e.target){isKnownTarget=!0;break}}}catch(err){_iterator3.e(err)}finally{_iterator3.f()}!isKnownTarget&&e.target.contains&&_this3._scrollTargets.push(e.target);var win=_this3._win();_this3._scrollTimer&&win.clearTimeout(_this3._scrollTimer),_this3._scrollTimer=win.setTimeout((function(){_this3._scrollTimer=void 0,Focusable_UberGroupper.updateVisible(_this3._scrollTargets),_this3._scrollTargets=[]}),200)},this._tabster=tabster,this._win=getWindow,this._cur={focused:{},current:{}},this._initTimer=getWindow().setTimeout(this._init,0)}return Focusable_createClass(FocusableAPI,[{key:"dispose",value:function dispose(){var win=this._win();this._initTimer&&(win.clearTimeout(this._initTimer),this._initTimer=void 0),this._scrollTimer&&(win.clearTimeout(this._scrollTimer),this._scrollTimer=void 0),win.document.removeEventListener(MUTATION_EVENT_NAME,this._onMutation,!0),win.removeEventListener("scroll",this._onScroll,!0),this._tabster.focusedElement.unsubscribe(this._onFocus),this._scrollTargets=[]}},{key:"_getBody",value:function _getBody(){var last=this._tabster.focusedElement.getLastFocusedElement();return last&&last.ownerDocument?last.ownerDocument.body:this._win().document.body}},{key:"_updateFocusedGrouppers",value:function _updateFocusedGrouppers(element,forceUpdate){for(var newFocusedGrouppers={},_el=element;_el;_el=_el.parentElement){var tabsterOnElement=getTabsterOnElement(this._tabster,_el);tabsterOnElement&&tabsterOnElement.groupper&&(newFocusedGrouppers[tabsterOnElement.groupper.id]=tabsterOnElement.groupper)}for(var _i7=0,_Object$keys7=Object.keys(this._cur.focused);_i7<_Object$keys7.length;_i7++){var gid=_Object$keys7[_i7];if(!newFocusedGrouppers[gid]){var g=this._cur.focused[gid];g.setFocused(!1),g.setUnlimited(!1),forceUpdate&&g.forceUpdate()}}for(var _i8=0,_Object$keys8=Object.keys(newFocusedGrouppers);_i8<_Object$keys8.length;_i8++){var _gid=_Object$keys8[_i8];if(!this._cur.focused[_gid]){var _g=newFocusedGrouppers[_gid],groupElement=_g.getElement();groupElement&&(_g.setFocused(!0),element!==this._getGroupFirst(groupElement,!1)&&_g.setUnlimited(!0))}}this._cur.focused=newFocusedGrouppers}},{key:"_getGroupFirst",value:function _getGroupFirst(groupElement,ignoreGroupper){return this._tabster.focusable.isFocusable(groupElement)?groupElement:this._tabster.focusable.findFirst(groupElement,!1,ignoreGroupper)}},{key:"addGroupper",value:function addGroupper(element,basic,extended){var tabsterOnElement=getTabsterOnElement(this._tabster,element);if(tabsterOnElement&&tabsterOnElement.groupper)throw new Error("The element already has a focus group");dispatchMutationEvent(element,{groupper:new Focusable_Groupper(this._tabster,element,this._win,this._cur,basic,extended)})}},{key:"removeGroupper",value:function removeGroupper(element){var tabsterOnElement=getTabsterOnElement(this._tabster,element),groupper=tabsterOnElement&&tabsterOnElement.groupper;groupper&&(groupper.dispose(),dispatchMutationEvent(element,{groupper:groupper,removed:!0}))}},{key:"moveGroupper",value:function moveGroupper(from,to){if(from!==to){var tabsterOnElementFrom=getTabsterOnElement(this._tabster,from),groupper=tabsterOnElementFrom&&tabsterOnElementFrom.groupper;groupper&&(groupper.moveTo(to),dispatchMutationEvent(from,{groupper:groupper,removed:!0}),dispatchMutationEvent(to,{groupper:groupper}))}}},{key:"setGroupperProps",value:function setGroupperProps(element,basic,extended){var groupper=this._findGroupper(element);groupper&&groupper.setProps(basic,extended)}},{key:"setCurrentGroupper",value:function setCurrentGroupper(element,forceUpdate){var groupper=element?this._findGroupper(element):null;if(null===element)for(var _i9=0,_Object$keys9=Object.keys(this._cur.current);_i9<_Object$keys9.length;_i9++){var gid=_Object$keys9[_i9],g=this._cur.current[gid];g.setCurrent(!1),forceUpdate&&g.forceUpdate()}else for(;groupper;){var _groupper$getElement;groupper.setCurrent(!0),forceUpdate&&groupper.forceUpdate();var parentEl=null===(_groupper$getElement=groupper.getElement())||void 0===_groupper$getElement?void 0:_groupper$getElement.parentElement;groupper=parentEl?this._findGroupper(parentEl):null}}},{key:"isInCurrentGroupper",value:function isInCurrentGroupper(element){return this._isInCurrentGroupper(element,!1)}},{key:"_isInCurrentGroupper",value:function _isInCurrentGroupper(element,unlimitedOnly){var _groupper,groupper=this._findGroupper(element),groupElement=null===(_groupper=groupper)||void 0===_groupper?void 0:_groupper.getElement();if(groupper&&groupElement){var isValidForLimited=!1;for(unlimitedOnly&&(isValidForLimited=element.contains(this._getGroupFirst(groupElement,!0)));groupper;){var _groupElement,state=groupper.getState();if(!1===state.isCurrent)return!1;if(unlimitedOnly&&state.isLimited&&!isValidForLimited)return!1;var parentEl=null===(_groupElement=groupElement)||void 0===_groupElement?void 0:_groupElement.parentElement;(groupper=parentEl?this._findGroupper(parentEl):null)&&(groupElement=groupper.getElement())}return!0}}},{key:"_findGroupper",value:function _findGroupper(element){for(var _el2=element;_el2;_el2=_el2.parentElement){var tabsterOnElement=getTabsterOnElement(this._tabster,_el2);if(tabsterOnElement&&tabsterOnElement.groupper)return tabsterOnElement.groupper}return null}},{key:"findGroupper",value:function findGroupper(element){var groupper=this._findGroupper(element);return groupper&&groupper.getElement()||null}},{key:"_findNextGroupper",value:function _findNextGroupper(element,next,ignoreModalizer){var cur=this.findGroupper(element),containerElement=cur&&cur.parentElement;if(cur&&containerElement){var tabsterOnElement=getTabsterOnElement(this._tabster,containerElement),_container2=tabsterOnElement&&tabsterOnElement.uberGroupper;if(_container2)for(var _el3=next(_container2,cur);_el3;_el3=next(_container2,cur,_el3)){var groupperTabsterOnElement=getTabsterOnElement(this._tabster,_el3);if(groupperTabsterOnElement&&groupperTabsterOnElement.groupper&&(ignoreModalizer||this.isAccessible(_el3))){if(!this._tabster.focusable.isFocusable(_el3)&&!this._tabster.focusable.findFirst(_el3,!1,!0))continue;return _el3}}}return null}},{key:"findFirstGroupper",value:function findFirstGroupper(context,ignoreModalizer){return this._findNextGroupper(context,(function(container,initial,el){var _container$getElement;return void 0===el?(null===(_container$getElement=container.getElement())||void 0===_container$getElement?void 0:_container$getElement.firstElementChild)||null:el?el.nextElementSibling:null}),ignoreModalizer)}},{key:"findLastGroupper",value:function findLastGroupper(context,ignoreModalizer){return this._findNextGroupper(context,(function(container,initial,el){var _container$getElement2;return void 0===el?(null===(_container$getElement2=container.getElement())||void 0===_container$getElement2?void 0:_container$getElement2.lastElementChild)||null:el?el.previousElementSibling:null}),ignoreModalizer)}},{key:"findNextGroupper",value:function findNextGroupper(context,ignoreModalizer){return this._findNextGroupper(context,(function(container,initial,el){return void 0===el?initial.nextElementSibling:el?el.nextElementSibling:null}),ignoreModalizer)}},{key:"findPrevGroupper",value:function findPrevGroupper(context,ignoreModalizer){return this._findNextGroupper(context,(function(container,initial,el){return void 0===el?initial.previousElementSibling:el?el.previousElementSibling:null}),ignoreModalizer)}},{key:"getProps",value:function getProps(element){var tabsterOnElement=getTabsterOnElement(this._tabster,element);return tabsterOnElement&&tabsterOnElement.focusable||{}}},{key:"setProps",value:function setProps(element,props){var tabsterOnElement=getTabsterOnElement(this._tabster,element),curProps=tabsterOnElement&&tabsterOnElement.focusable||{},newProps={};props&&(newProps.isDefault=props.isDefault,newProps.isIgnored=props.isIgnored,newProps.mover=props.mover,newProps.ignoreAriaDisabled=props.ignoreAriaDisabled),curProps.isDefault===newProps.isDefault&&curProps.isIgnored===newProps.isIgnored&&curProps.mover===newProps.mover&&curProps.ignoreAriaDisabled===newProps.ignoreAriaDisabled||setTabsterOnElement(this._tabster,element,{focusable:newProps})}},{key:"isFocusable",value:function isFocusable(el,includeProgrammaticallyFocusable,noVisibleCheck,noAccessibleCheck){return!(!matchesSelector(el,_focusableSelector)||!includeProgrammaticallyFocusable&&-1===el.tabIndex)&&((noVisibleCheck||this.isVisible(el))&&(noAccessibleCheck||this.isAccessible(el)))}},{key:"isVisible",value:function isVisible(el){if(!el.ownerDocument)return!1;if(null===el.offsetParent&&el.ownerDocument.body!==el)return!1;var win=el.ownerDocument.defaultView;if(!win)return!1;var rect=el.ownerDocument.body.getBoundingClientRect();return(0!==rect.width||0!==rect.height)&&"hidden"!==win.getComputedStyle(el).visibility}},{key:"isAccessible",value:function isAccessible(el){for(var e=el;e;e=e.parentElement){var _tabsterOnElement$foc,tabsterOnElement=getTabsterOnElement(this._tabster,e);if(this._isHidden(e))return!1;if(!(null==tabsterOnElement||null===(_tabsterOnElement$foc=tabsterOnElement.focusable)||void 0===_tabsterOnElement$foc?void 0:_tabsterOnElement$foc.ignoreAriaDisabled)&&this._isDisabled(e))return!1}return!0}},{key:"_attrIs",value:function _attrIs(el,name,value){var attrVal=el.getAttribute(name);return!(!attrVal||attrVal.toLowerCase()!==value)}},{key:"_isDisabled",value:function _isDisabled(el){return this._attrIs(el,"disabled","true")}},{key:"_isHidden",value:function _isHidden(el){return this._attrIs(el,"aria-hidden","true")}},{key:"findFirst",value:function findFirst(context,includeProgrammaticallyFocusable,ignoreGroupper){return this._findElement(context||this._getBody(),null,includeProgrammaticallyFocusable,ignoreGroupper,!1)}},{key:"findLast",value:function findLast(context,includeProgrammaticallyFocusable,ignoreGroupper){return this._findElement(context||this._getBody(),null,includeProgrammaticallyFocusable,ignoreGroupper,!0)}},{key:"findNext",value:function findNext(current,context,includeProgrammaticallyFocusable,ignoreGroupper){return this._findElement(context||this._getBody(),current,includeProgrammaticallyFocusable,ignoreGroupper,!1)}},{key:"findPrev",value:function findPrev(current,context,includeProgrammaticallyFocusable,ignoreGroupper){return this._findElement(context||this._getBody(),current,includeProgrammaticallyFocusable,ignoreGroupper,!0)}},{key:"findDefault",value:function findDefault(context,includeProgrammaticallyFocusable,ignoreGroupper){var _this4=this;return this._findElement(context||this._getBody(),null,includeProgrammaticallyFocusable,ignoreGroupper,!1,(function(el){return _this4._tabster.focusable.isFocusable(el,includeProgrammaticallyFocusable)&&!!_this4.getProps(el).isDefault}))}},{key:"findAll",value:function findAll(context,customFilter,includeProgrammaticallyFocusable,ignoreGroupper,skipDefaultCondition){var _this5=this,acceptCondition=function acceptCondition(el){var defaultCheck=_this5._tabster.focusable.isFocusable(el,includeProgrammaticallyFocusable),customCheck=customFilter(el);return(skipDefaultCondition||defaultCheck)&&!!customCheck},walker=createElementTreeWalker(context.ownerDocument,context,(function(node){return _this5._acceptElement(node,acceptCondition,ignoreGroupper)})),nodeFilter=null==walker?void 0:walker.filter;if(!walker||!context||!nodeFilter)return[];for(var node,foundNodes=[];node=walker.nextNode();)foundNodes.push(node);return foundNodes}},{key:"_findElement",value:function _findElement(container,currentElement,includeProgrammaticallyFocusable,ignoreGroupper,prev,acceptCondition){var _this6=this;if(!container)return null;if(!container.ownerDocument||currentElement&&container!==currentElement&&!container.contains(currentElement))return null;acceptCondition||(acceptCondition=function acceptCondition(el){return _this6._tabster.focusable.isFocusable(el,includeProgrammaticallyFocusable)});var walker=createElementTreeWalker(container.ownerDocument,container,(function(node){return _this6._acceptElement(node,acceptCondition,ignoreGroupper)}));if(!walker)return null;if(currentElement)walker.currentNode=currentElement;else if(prev){for(var lastChild=null,i=container.lastElementChild;i;i=i.lastElementChild)lastChild=i;if(!lastChild)return null;if(this._acceptElement(lastChild,acceptCondition,ignoreGroupper)===NodeFilter.FILTER_ACCEPT)return lastChild;walker.currentNode=lastChild}return prev?walker.previousNode():walker.nextNode()}},{key:"_acceptElement",value:function _acceptElement(element,acceptCondition,ignoreGroupper){return Root_RootAPI.getTabsterContext(this._tabster,element)?"IFRAME"===element.tagName?NodeFilter.FILTER_ACCEPT:this.isAccessible(element)&&(ignoreGroupper||!1!==this._isInCurrentGroupper(element,!0))?acceptCondition(element)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP:NodeFilter.FILTER_REJECT:NodeFilter.FILTER_SKIP}}],[{key:"dispose",value:function dispose(instance){instance.dispose()}},{key:"forgetFocusedGrouppers",value:function forgetFocusedGrouppers(instance){instance._updateFocusedGrouppers(null,!0)}}]),FocusableAPI}(),Keys_Tab=9,Keys_Enter=13,Keys_Esc=27,Keys_PageUp=33,Keys_PageDown=34,Keys_End=35,Keys_Home=36,Keys_Left=37,Keys_Up=38,Keys_Right=39,Keys_Down=40;function FocusedElement_typeof(obj){return(FocusedElement_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function FocusedElement_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function FocusedElement_get(target,property,receiver){return(FocusedElement_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(target,property,receiver){var base=function FocusedElement_superPropBase(object,property){for(;!Object.prototype.hasOwnProperty.call(object,property)&&null!==(object=FocusedElement_getPrototypeOf(object)););return object}(target,property);if(base){var desc=Object.getOwnPropertyDescriptor(base,property);return desc.get?desc.get.call(receiver):desc.value}})(target,property,receiver||target)}function FocusedElement_setPrototypeOf(o,p){return(FocusedElement_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function FocusedElement_createSuper(Derived){var hasNativeReflectConstruct=function FocusedElement_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=FocusedElement_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=FocusedElement_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return FocusedElement_possibleConstructorReturn(this,result)}}function FocusedElement_possibleConstructorReturn(self,call){return!call||"object"!==FocusedElement_typeof(call)&&"function"!=typeof call?function FocusedElement_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function FocusedElement_getPrototypeOf(o){return(FocusedElement_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}var _inputSelector=["input","textarea","*[contenteditable]"].join(", "),FocusedElement_FocusedElementState=function(_Subscribable){!function FocusedElement_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&FocusedElement_setPrototypeOf(subClass,superClass)}(FocusedElementState,_Subscribable);var _super=FocusedElement_createSuper(FocusedElementState);function FocusedElementState(tabster,getWindow){var _this;return function FocusedElement_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,FocusedElementState),(_this=_super.call(this))._tabster=void 0,_this._initTimer=void 0,_this._win=void 0,_this._nextVal=void 0,_this._lastVal=void 0,_this._init=function(){_this._initTimer=void 0;var win=_this._win();win.document.addEventListener("keyborg:focusin",_this._onFocusIn,!0),win.document.addEventListener("focusout",_this._onFocusOut,!0),win.document.addEventListener("mousedown",_this._onMouseDown,!0),win.addEventListener("keydown",_this._onKeyDown,!0)},_this._onFocusIn=function(e){_this._setFocusedElement(e.target,e.details.relatedTarget||void 0,e.details.isFocusedProgrammatically)},_this._onFocusOut=function(e){_this._setFocusedElement(void 0,e.relatedTarget||void 0)},_this._onMouseDown=function(e){var groupper=_this._tabster.focusable.findGroupper(e.target);groupper&&_this._tabster.focusable.setCurrentGroupper(groupper)},_this._onKeyDown=function(e){var _ctx$mover,_ctx$mover2,curElement=_this.getVal();if(curElement&&curElement.ownerDocument&&"true"!==curElement.contentEditable){switch(e.keyCode){case Keys_Enter:case Keys_Esc:case Keys_Tab:case Keys_Down:case Keys_Right:case Keys_Up:case Keys_Left:case Keys_PageDown:case Keys_PageUp:case Keys_Home:case Keys_End:break;default:return}var ctx=Root_RootAPI.getTabsterContext(_this._tabster,curElement,{checkRtl:!0}),keyCode=e.keyCode,isTab=keyCode===Keys_Tab;if((isTab||ctx&&ctx.mover&&!ctx.isGroupperFirst)&&keyCode!==Keys_Enter&&keyCode!==Keys_Esc){var _ctx$moverOptions;if(!ctx)return;var isPrev=isTab&&e.shiftKey||!isTab&&(keyCode===Keys_Left&&!ctx.isRtl||keyCode===Keys_Right&&ctx.isRtl||keyCode===Keys_Up||keyCode===Keys_PageUp||keyCode===Keys_Home),fromElement=curElement;if(isTab&&ctx.mover&&(null===(_ctx$moverOptions=ctx.moverOptions)||void 0===_ctx$moverOptions?void 0:_ctx$moverOptions.navigationType)===MoverKeys.Arrows){for(var parentCtx=ctx,rootMover=ctx.mover;null!==(_parentCtx=parentCtx)&&void 0!==_parentCtx&&null!==(_parentCtx$mover=_parentCtx.mover)&&void 0!==_parentCtx$mover&&_parentCtx$mover.parentElement;){var _parentCtx,_parentCtx$mover;rootMover=parentCtx.mover,parentCtx=Root_RootAPI.getTabsterContext(_this._tabster,parentCtx.mover.parentElement)}fromElement=isPrev?_this._tabster.focusable.findFirst(rootMover):_this._tabster.focusable.findLast(rootMover)}if(!fromElement)return;var next=null;switch(keyCode){case Keys_Tab:case Keys_Up:case Keys_Down:case Keys_Left:case Keys_Right:next=isPrev?_this._tabster.focusable.findPrev(fromElement):_this._tabster.focusable.findNext(fromElement);break;case Keys_Home:next=null!==(_ctx$mover=ctx.mover)&&void 0!==_ctx$mover&&_ctx$mover.contains(fromElement)?_this._tabster.focusable.findFirst(ctx.mover):next;break;case Keys_End:next=null!==(_ctx$mover2=ctx.mover)&&void 0!==_ctx$mover2&&_ctx$mover2.contains(fromElement)?_this._tabster.focusable.findLast(ctx.mover):next;break;case Keys_PageDown:case Keys_PageUp:return}if(!isTab&&ctx.mover){var _ctx$moverOptions2,_ctx$moverOptions3,horizontalKeysOnVerticalAxis=(keyCode===Keys_Left||keyCode===Keys_Right)&&(null===(_ctx$moverOptions2=ctx.moverOptions)||void 0===_ctx$moverOptions2?void 0:_ctx$moverOptions2.axis)===MoverAxis.Vertical,verticalKeysOnHorizontalAxis=(keyCode===Keys_Up||keyCode===Keys_Down)&&(null===(_ctx$moverOptions3=ctx.moverOptions)||void 0===_ctx$moverOptions3?void 0:_ctx$moverOptions3.axis)===MoverAxis.Horizontal;if(horizontalKeysOnVerticalAxis||verticalKeysOnHorizontalAxis)return;if(!next||next&&!ctx.mover.contains(next)){var _ctx$moverOptions4;if(e.preventDefault(),null===(_ctx$moverOptions4=ctx.moverOptions)||void 0===_ctx$moverOptions4||!_ctx$moverOptions4.cyclic)return;next=isPrev?_this._tabster.focusable.findLast(ctx.mover):_this._tabster.focusable.findFirst(ctx.mover)}}var groupper=null==ctx?void 0:ctx.groupper,groupperElement=null==groupper?void 0:groupper.getElement();if(groupper&&groupperElement){var first=_this._getFirstInGroupper(groupperElement,!1);if(!first||curElement===first||groupper.getBasicProps().isLimited!==GroupperFocusLimits.LimitedTrapFocus||next&&next!==first&&groupperElement.contains(next)){if(curElement===first&&groupperElement.parentElement){var _RootAPI$getTabsterCo,parentGroupper=null===(_RootAPI$getTabsterCo=Root_RootAPI.getTabsterContext(_this._tabster,groupperElement.parentElement))||void 0===_RootAPI$getTabsterCo?void 0:_RootAPI$getTabsterCo.groupper,parentGroupperElement=null==parentGroupper?void 0:parentGroupper.getElement();parentGroupper&&parentGroupperElement&&!parentGroupperElement.contains(next)&&parentGroupper.getBasicProps().isLimited===GroupperFocusLimits.LimitedTrapFocus&&(next=curElement)}}else next=isPrev?_this._tabster.focusable.findLast(groupperElement):_this._tabster.focusable.findNext(first,groupperElement)}if(ctx&&ctx.modalizer){var _nctx$modalizer,nctx=next&&Root_RootAPI.getTabsterContext(_this._tabster,next);if((!nctx||ctx.root.uid!==nctx.root.uid||null===(_nctx$modalizer=nctx.modalizer)||void 0===_nctx$modalizer||!_nctx$modalizer.isActive())&&ctx.modalizer.onBeforeFocusOut())return void e.preventDefault()}next?"IFRAME"!==next.tagName&&(e.preventDefault(),nativeFocus(next)):ctx&&ctx.root.moveOutWithDefaultAction(isPrev)}else{var _groupper2;if((keyCode===Keys_Left||keyCode===Keys_Right)&&_this._isInput(curElement))return;var _groupper=null==ctx?void 0:ctx.groupper,_groupperElement=null===(_groupper2=_groupper)||void 0===_groupper2?void 0:_groupper2.getElement();if(!_groupper||!_groupperElement)return;var shouldStopPropagation=!0,_next=null;switch(keyCode){case Keys_Enter:case Keys_Esc:var state=_groupper.getState();if(e.keyCode===Keys_Enter)state.isLimited&&curElement===_this._getFirstInGroupper(_groupperElement,!0)?(_groupper.setUnlimited(!0),_next=_this._tabster.focusable.findNext(curElement),_groupperElement.contains(_next)||(_next=null),null===_next&&(shouldStopPropagation=!1)):shouldStopPropagation=!1;else{if(state.isLimited&&_groupperElement.parentElement){var _RootAPI$getTabsterCo2,_parentGroupper=null===(_RootAPI$getTabsterCo2=Root_RootAPI.getTabsterContext(_this._tabster,_groupperElement.parentElement))||void 0===_RootAPI$getTabsterCo2?void 0:_RootAPI$getTabsterCo2.groupper;_parentGroupper&&(_groupperElement=_parentGroupper.getElement(),_groupper=_parentGroupper,state=_parentGroupper.getState())}state.isLimited||(_groupper.setUnlimited(!1),_next=_groupperElement||null)}break;case Keys_Down:case Keys_Right:case Keys_Up:case Keys_Left:_next=_this._findNextGroupper(_groupperElement,e.keyCode,_groupper.getBasicProps().nextDirection,null==ctx?void 0:ctx.isRtl);break;case Keys_PageDown:(_next=_this._findPageDownGroupper(_groupperElement))&&scrollIntoView(_this._win,_next,!0);break;case Keys_PageUp:(_next=_this._findPageUpGroupper(_groupperElement))&&scrollIntoView(_this._win,_next,!1);break;case Keys_Home:_groupperElement.parentElement&&(_next=_this._tabster.focusable.findFirstGroupper(_groupperElement));break;case Keys_End:_groupperElement.parentElement&&(_next=_this._tabster.focusable.findLastGroupper(_groupperElement))}shouldStopPropagation&&(e.preventDefault(),e.stopImmediatePropagation()),_next&&(_this._tabster.focusable.isFocusable(_next)||(_next=_this._tabster.focusable.findFirst(_next,!1,!0)),_next&&"IFRAME"!==_next.tagName&&(_this._tabster.focusable.setCurrentGroupper(_next),KeyboardNavigation_KeyboardNavigationState.setVal(_this._tabster.keyboardNavigation,!0),nativeFocus(_next)))}}},_this._validateFocusedElement=function(element){_this._tabster.focusable.setCurrentGroupper(element)},_this._tabster=tabster,_this._win=getWindow,_this._initTimer=getWindow().setTimeout(_this._init,0),_this}return function FocusedElement_createClass(Constructor,protoProps,staticProps){return protoProps&&FocusedElement_defineProperties(Constructor.prototype,protoProps),staticProps&&FocusedElement_defineProperties(Constructor,staticProps),Constructor}(FocusedElementState,[{key:"dispose",value:function dispose(){FocusedElement_get(FocusedElement_getPrototypeOf(FocusedElementState.prototype),"dispose",this).call(this);var win=this._win();this._initTimer&&(win.clearTimeout(this._initTimer),this._initTimer=void 0),win.document.removeEventListener("keyborg:focusin",this._onFocusIn,!0),win.document.removeEventListener("focusout",this._onFocusOut,!0),win.document.removeEventListener("mousedown",this._onMouseDown,!0),win.removeEventListener("keydown",this._onKeyDown,!0),delete FocusedElementState._lastResetElement,delete this._nextVal,delete this._lastVal}},{key:"getFocusedElement",value:function getFocusedElement(){return this.getVal()}},{key:"getLastFocusedElement",value:function getLastFocusedElement(){var _this$_lastVal,el=null===(_this$_lastVal=this._lastVal)||void 0===_this$_lastVal?void 0:_this$_lastVal.get();return(!el||el&&!documentContains(el.ownerDocument,el))&&(this._lastVal=el=void 0),el}},{key:"focus",value:function focus(element,noFocusedProgrammaticallyFlag,noAccessibleCheck){return!!this._tabster.focusable.isFocusable(element,noFocusedProgrammaticallyFlag,!1,noAccessibleCheck)&&(element.focus(),!0)}},{key:"focusDefault",value:function focusDefault(container){var el=this._tabster.focusable.findDefault(container);return!!el&&(this._tabster.focusedElement.focus(el),!0)}},{key:"focusFirst",value:function focusFirst(container){var first=this._tabster.focusable.findFirst(container,!1,!0);return!!first&&(this.focus(first),!0)}},{key:"resetFocus",value:function resetFocus(container){if(!this._tabster.focusable.isVisible(container))return!1;if(this._tabster.focusable.isFocusable(container,!0,!0,!0))this.focus(container);else{var prevTabIndex=container.getAttribute("tabindex"),prevAriaHidden=container.getAttribute("aria-hidden");container.tabIndex=-1,container.setAttribute("aria-hidden","true"),FocusedElementState._lastResetElement=new WeakHTMLElement(this._win,container),this.focus(container,!0,!0),this._setOrRemoveAttribute(container,"tabindex",prevTabIndex),this._setOrRemoveAttribute(container,"aria-hidden",prevAriaHidden)}return!0}},{key:"_setOrRemoveAttribute",value:function _setOrRemoveAttribute(element,name,value){null===value?element.removeAttribute(name):element.setAttribute(name,value)}},{key:"_setFocusedElement",value:function _setFocusedElement(element,relatedTarget,isFocusedProgrammatically){var details={relatedTarget:relatedTarget};if(element){var _FocusedElementState$,lastResetElement=null===(_FocusedElementState$=FocusedElementState._lastResetElement)||void 0===_FocusedElementState$?void 0:_FocusedElementState$.get();if(FocusedElementState._lastResetElement=void 0,lastResetElement===element||function shouldIgnoreFocus(element){return!!element.__shouldIgnoreFocus}(element))return;details.isFocusedProgrammatically=isFocusedProgrammatically}var nextVal=this._nextVal={element:element?new WeakHTMLElement(this._win,element):void 0,details:details};element&&element!==this._val&&this._validateFocusedElement(element),this._nextVal===nextVal&&this.setVal(element,details),this._nextVal=void 0}},{key:"setVal",value:function setVal(val,details){FocusedElement_get(FocusedElement_getPrototypeOf(FocusedElementState.prototype),"setVal",this).call(this,val,details),val&&(this._lastVal=new WeakHTMLElement(this._win,val))}},{key:"_getFirstInGroupper",value:function _getFirstInGroupper(groupperElement,ignoreGroupper){return this._tabster.focusable.isFocusable(groupperElement)?groupperElement:this._tabster.focusable.findFirst(groupperElement,!1,ignoreGroupper)}},{key:"_findNextGroupper",value:function _findNextGroupper(from,key,direction,isRtl){if(direction===GroupperNextDirections.Vertical&&(key===Keys_Left||key===Keys_Right))return null;if(direction===GroupperNextDirections.Horizontal&&(key===Keys_Up||key===Keys_Down))return null;if(void 0===direction||direction===GroupperNextDirections.Both)return key===Keys_Left&&!isRtl||key===Keys_Right&&isRtl||key===Keys_Up?this._tabster.focusable.findPrevGroupper(from):this._tabster.focusable.findNextGroupper(from);for(var next,lastEl,prevTop,fromRect=from.getBoundingClientRect(),nextMethod=key===Keys_Down||key===Keys_Right?"findNextGroupper":"findPrevGroupper",el=this._tabster.focusable[nextMethod](from);el;el=this._tabster.focusable[nextMethod](el)){var rect=el.getBoundingClientRect();if(key===Keys_Up){if(rect.top<fromRect.top){if(void 0===prevTop)prevTop=rect.top;else if(rect.top<prevTop)break;if(rect.left<fromRect.left){next||(next=el);break}next=el}}else if(key===Keys_Down){if(rect.top>fromRect.top){if(void 0===prevTop)prevTop=rect.top;else if(rect.top>prevTop)break;if(rect.left>fromRect.left){next||(next=el);break}next=el}}else if(key===Keys_Left||key===Keys_Right){next=el;break}lastEl=el}return next||lastEl||null}},{key:"_findPageUpGroupper",value:function _findPageUpGroupper(from){for(var ue=this._tabster.focusable.findPrevGroupper(from),pue=null;ue;)pue=ue,ue=isElementVerticallyVisibleInContainer(this._win,ue)?this._tabster.focusable.findPrevGroupper(ue):null;return pue}},{key:"_findPageDownGroupper",value:function _findPageDownGroupper(from){for(var de=this._tabster.focusable.findNextGroupper(from),pde=null;de;)pde=de,de=isElementVerticallyVisibleInContainer(this._win,de)?this._tabster.focusable.findNextGroupper(de):null;return pde}},{key:"_isInput",value:function _isInput(element){return matchesSelector(element,_inputSelector)}}],[{key:"dispose",value:function dispose(instance){instance.dispose()}},{key:"forgetMemorized",value:function forgetMemorized(instance,parent){var _nextVal,_nextVal$element,wel=FocusedElementState._lastResetElement,el=wel&&wel.get();el&&parent.contains(el)&&delete FocusedElementState._lastResetElement,(el=null===(_nextVal=instance._nextVal)||void 0===_nextVal||null===(_nextVal$element=_nextVal.element)||void 0===_nextVal$element?void 0:_nextVal$element.get())&&parent.contains(el)&&delete instance._nextVal,(el=(wel=instance._lastVal)&&wel.get())&&parent.contains(el)&&delete instance._lastVal}}]),FocusedElementState}(Subscribable);function Modalizer_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function Modalizer_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function Modalizer_createClass(Constructor,protoProps,staticProps){return protoProps&&Modalizer_defineProperties(Constructor.prototype,protoProps),staticProps&&Modalizer_defineProperties(Constructor,staticProps),Constructor}FocusedElement_FocusedElementState._lastResetElement=void 0;var _lastInternalId=0;var Modalizer_Modalizer=function(){function Modalizer(element,tabster,win,basic,extended){Modalizer_classCallCheck(this,Modalizer),this.internalId=void 0,this.userId=void 0,this._tabster=void 0,this._win=void 0,this._basic=void 0,this._extended=void 0,this._isActive=void 0,this._isFocused=!1,this._modalizerRoot=void 0,this._modalizerParent=void 0,this._tabster=tabster,this._win=win,this.internalId="ml"+ ++_lastInternalId,this.userId=basic.id,this._modalizerRoot=new WeakHTMLElement(win,element),element.parentElement?this._modalizerParent=new WeakHTMLElement(win,element.parentElement):this._modalizerParent=null,this._basic=basic,this._extended=extended||{},this._setAccessibilityProps()}return Modalizer_createClass(Modalizer,[{key:"setProps",value:function setProps(basic,extended){basic?(basic.id&&(this.userId=basic.id),this._basic=Object.assign({},this._basic,basic)):null===basic&&(this._basic={id:this.userId}),extended?this._extended=Object.assign({},this._extended,extended):null===extended&&(this._extended={}),this._setAccessibilityProps()}},{key:"dispose",value:function dispose(){this._isFocused&&this.setFocused(!1),this._remove(),this._extended={}}},{key:"move",value:function move(newElement){this._remove(),this._modalizerRoot=new WeakHTMLElement(this._win,newElement),newElement.parentElement&&(this._modalizerParent=new WeakHTMLElement(this._win,newElement.parentElement)),this._setAccessibilityProps(),this._isActive=!this._isActive,this.setActive(!this._isActive)}},{key:"setActive",value:function setActive(active){var _this$_modalizerRoot$,_this$_modalizerParen,_this$_modalizerParen2,_this=this;if(active!==this._isActive){this._isActive=active;var targetDocument=(null===(_this$_modalizerRoot$=this._modalizerRoot.get())||void 0===_this$_modalizerRoot$?void 0:_this$_modalizerRoot$.ownerDocument)||(null===(_this$_modalizerParen=this._modalizerParent)||void 0===_this$_modalizerParen||null===(_this$_modalizerParen2=_this$_modalizerParen.get())||void 0===_this$_modalizerParen2?void 0:_this$_modalizerParen2.ownerDocument);targetDocument||(targetDocument=this._win().document);var ariaHiddenWalker=createElementTreeWalker(targetDocument,targetDocument.body,(function(el){var _this$_modalizerParen3;if(_this._basic.isOthersAccessible)return NodeFilter.FILTER_REJECT;var modalizerRoot=_this._modalizerRoot.get(),modalizerParent=null===(_this$_modalizerParen3=_this._modalizerParent)||void 0===_this$_modalizerParen3?void 0:_this$_modalizerParen3.get(),isModalizerElement=modalizerRoot===el,containsModalizerRoot=!!el.contains(modalizerRoot||null),containsModalizerParent=!!el.contains(modalizerParent||null);if(isModalizerElement)return NodeFilter.FILTER_REJECT;if(containsModalizerRoot||containsModalizerParent)return NodeFilter.FILTER_SKIP;!function augmentAttribute(tabster,element,name,value){var uid=getElementUId(tabster.getWindow,element),entry=tabster.storageEntry(uid,!0);if(!entry.aug){if(void 0===value)return;entry.aug={}}if(void 0===value){if(name in entry.aug){var origVal=entry.aug[name];delete entry.aug[name],null===origVal?element.removeAttribute(name):element.setAttribute(name,origVal)}}else name in entry.aug||(entry.aug[name]=element.getAttribute(name)),null===value?element.removeAttribute(name):element.setAttribute(name,value);void 0===value&&0===Object.keys(entry.aug).length&&(delete entry.aug,tabster.storageEntry(uid,!1))}(_this._tabster,el,"aria-hidden",active?"true":void 0);var modalizerRootOnPage=modalizerRoot!==(null==modalizerRoot?void 0:modalizerRoot.ownerDocument.body)&&(null==modalizerRoot?void 0:modalizerRoot.ownerDocument.body.contains(modalizerRoot));return modalizerParent!==(null==modalizerParent?void 0:modalizerParent.ownerDocument.body)&&(null==modalizerParent?void 0:modalizerParent.ownerDocument.body.contains(modalizerParent))||modalizerRootOnPage?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_SKIP}));if(ariaHiddenWalker)for(;ariaHiddenWalker.nextNode(););}}},{key:"isActive",value:function isActive(){return!!this._isActive}},{key:"getModalizerRoot",value:function getModalizerRoot(){return this._modalizerRoot.get()}},{key:"contains",value:function contains(element){var _this$getModalizerRoo;return!(null===(_this$getModalizerRoo=this.getModalizerRoot())||void 0===_this$getModalizerRoo||!_this$getModalizerRoo.contains(element))}},{key:"setFocused",value:function setFocused(focused){this._isFocused!==focused&&(this._isFocused=focused,focused?this._extended.onFocusIn&&this._extended.onFocusIn():this._extended.onFocusOut&&this._extended.onFocusOut(!1))}},{key:"onBeforeFocusOut",value:function onBeforeFocusOut(){return!!this._extended.onFocusOut&&this._extended.onFocusOut(!0)}},{key:"getBasicProps",value:function getBasicProps(){return this._basic}},{key:"getExtendedProps",value:function getExtendedProps(){return this._extended}},{key:"_remove",value:function _remove(){0}},{key:"_setAccessibilityProps",value:function _setAccessibilityProps(){}}]),Modalizer}(),Modalizer_ModalizerAPI=function(){function ModalizerAPI(tabster){var _this2=this;Modalizer_classCallCheck(this,ModalizerAPI),this._tabster=void 0,this._win=void 0,this._initTimer=void 0,this._curModalizer=void 0,this._focusOutTimer=void 0,this._modalizers=void 0,this._init=function(){_this2._initTimer=void 0,_this2._tabster.focusedElement.subscribe(_this2._onFocus),_this2._win().document.addEventListener(MUTATION_EVENT_NAME,_this2._onMutation)},this._onMutation=function(e){var details=e.details;if(details.modalizer&&details.removed){var removedModalizer=details.modalizer;removedModalizer.isActive()&&(removedModalizer.setFocused(!1),removedModalizer.setActive(!1)),removedModalizer.dispose(),delete _this2._modalizers[removedModalizer.userId],_this2._curModalizer===removedModalizer&&(_this2._curModalizer=void 0)}},this._onFocus=function(focusedElement,details){var _this2$_curModalizer,_this2$_curModalizer2,_this2$_curModalizer4,ctx=focusedElement&&Root_RootAPI.getTabsterContext(_this2._tabster,focusedElement);if(ctx&&focusedElement){_this2._focusOutTimer&&(_this2._win().clearTimeout(_this2._focusOutTimer),_this2._focusOutTimer=void 0);var _this2$_curModalizer3,modalizer=null==ctx?void 0:ctx.modalizer;if(modalizer!==_this2._curModalizer)if(null===(_this2$_curModalizer=_this2._curModalizer)||void 0===_this2$_curModalizer||_this2$_curModalizer.setFocused(!1),!details.isFocusedProgrammatically||null!==(_this2$_curModalizer2=_this2._curModalizer)&&void 0!==_this2$_curModalizer2&&_this2$_curModalizer2.contains(focusedElement))null!==(_this2$_curModalizer4=_this2._curModalizer)&&void 0!==_this2$_curModalizer4&&_this2$_curModalizer4.getBasicProps().isOthersAccessible||_this2._restoreModalizerFocus(focusedElement);else null===(_this2$_curModalizer3=_this2._curModalizer)||void 0===_this2$_curModalizer3||_this2$_curModalizer3.setActive(!1),_this2._curModalizer=void 0,modalizer&&(_this2._curModalizer=modalizer,_this2._curModalizer.setActive(!0),_this2._curModalizer.setFocused(!0))}},this._tabster=tabster,this._win=tabster.getWindow,this._initTimer=this._win().setTimeout(this._init,0),this._modalizers={}}return Modalizer_createClass(ModalizerAPI,[{key:"dispose",value:function dispose(){var _this3=this,win=this._win();this._initTimer&&(win.clearTimeout(this._initTimer),this._initTimer=void 0),this._focusOutTimer&&(win.clearTimeout(this._focusOutTimer),this._focusOutTimer=void 0),Object.keys(this._modalizers).forEach((function(modalizerId){_this3._modalizers[modalizerId]&&(_this3._modalizers[modalizerId].dispose(),delete _this3._modalizers[modalizerId])})),this._tabster.focusedElement.unsubscribe(this._onFocus),delete this._curModalizer}},{key:"add",value:function add(element,basic,extended){var _this$_tabster$focuse,tabsterOnElement=getTabsterOnElement(this._tabster,element);if(!tabsterOnElement||!tabsterOnElement.modalizer){this._modalizers[basic.id];var modalizer=new Modalizer_Modalizer(element,this._tabster,this._win,basic,extended);if(this._modalizers[basic.id]=modalizer,element.contains(null!==(_this$_tabster$focuse=this._tabster.focusedElement.getFocusedElement())&&void 0!==_this$_tabster$focuse?_this$_tabster$focuse:null)){var prevModalizer=this._curModalizer;prevModalizer&&(prevModalizer.setActive(!1),prevModalizer.setFocused(!1)),this._curModalizer=modalizer,this._curModalizer.setActive(!0)}setTabsterOnElement(this._tabster,element,{modalizer:this._modalizers[basic.id]}),dispatchMutationEvent(element,{modalizer:this._modalizers[basic.id]})}}},{key:"setProps",value:function setProps(element,basic,extended){var tabsterOnElement=getTabsterOnElement(this._tabster,element);tabsterOnElement&&tabsterOnElement.modalizer&&tabsterOnElement.modalizer.setProps(basic,extended)}},{key:"remove",value:function remove(element){var tabsterOnElement=getTabsterOnElement(this._tabster,element),modalizer=tabsterOnElement&&tabsterOnElement.modalizer;modalizer&&(setTabsterOnElement(this._tabster,element,{modalizer:void 0}),modalizer.setActive(!1),this._curModalizer===modalizer&&(this._curModalizer=void 0),delete this._modalizers[modalizer.userId],modalizer.dispose())}},{key:"move",value:function move(from,to){var tabsterOnElementFrom=getTabsterOnElement(this._tabster,from),modalizer=tabsterOnElementFrom&&tabsterOnElementFrom.modalizer;modalizer&&(modalizer.move(to),setTabsterOnElement(this._tabster,to,{modalizer:modalizer}),setTabsterOnElement(this._tabster,from,{modalizer:void 0}),dispatchMutationEvent(from,{modalizer:modalizer,removed:!0}),dispatchMutationEvent(to,{modalizer:modalizer}))}},{key:"focus",value:function focus(elementFromModalizer,noFocusFirst,noFocusDefault){var ctx=Root_RootAPI.getTabsterContext(this._tabster,elementFromModalizer);if(ctx&&ctx.modalizer){this._curModalizer=ctx.modalizer,this._curModalizer.setActive(!0);var basic=this._curModalizer.getBasicProps(),modalizerRoot=this._curModalizer.getModalizerRoot();if(modalizerRoot){if(void 0===noFocusFirst&&(noFocusFirst=basic.isNoFocusFirst),!noFocusFirst&&this._tabster.keyboardNavigation.isNavigatingWithKeyboard()&&this._tabster.focusedElement.focusFirst(modalizerRoot))return!0;if(void 0===noFocusDefault&&(noFocusDefault=basic.isNoFocusDefault),!noFocusDefault&&this._tabster.focusedElement.focusDefault(modalizerRoot))return!0;this._tabster.focusedElement.resetFocus(modalizerRoot)}}else 0;return!1}},{key:"getActiveModalizer",value:function getActiveModalizer(){return this._curModalizer}},{key:"_restoreModalizerFocus",value:function _restoreModalizerFocus(outsideElement){if(null!=outsideElement&&outsideElement.ownerDocument&&this._curModalizer){var toFocus=this._tabster.focusable.findFirst(this._curModalizer.getModalizerRoot());if(toFocus){if(outsideElement.compareDocumentPosition(toFocus)&document.DOCUMENT_POSITION_PRECEDING&&!(toFocus=this._tabster.focusable.findLast(outsideElement.ownerDocument.body)))throw new Error("Something went wrong.");this._tabster.focusedElement.focus(toFocus)}else outsideElement.blur()}}}],[{key:"dispose",value:function dispose(instance){instance.dispose()}}]),ModalizerAPI}();"undefined"!=typeof document&&("onfullscreenchange"in document?"fullscreenchange":"onwebkitfullscreenchange"in document?"webkitfullscreenchange":"onmozfullscreenchange"in document?"mozfullscreenchange":"onmsfullscreenchange"in document&&"msfullscreenchange");function Tabster_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var Tabster_Tabster=function(){function Tabster(win,props){var _this=this;!function Tabster_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Tabster),this._storage=void 0,this._unobserve=void 0,this._win=void 0,this._forgetMemorizedTimer=void 0,this._forgetMemorizedElements=[],this.keyboardNavigation=void 0,this.focusedElement=void 0,this.focusable=void 0,this.root=void 0,this.outline=void 0,this.deloser=void 0,this.modalizer=void 0,this.observedElement=void 0,this.crossOrigin=void 0,this.outlineDispose=void 0,this.rootDispose=void 0,this.deloserDispose=void 0,this.modalizerDispose=void 0,this.observedElementDispose=void 0,this.crossOriginDispose=void 0,this.getWindow=function(){if(!_this._win)throw new Error("Using disposed Tabster.");return _this._win},this._storage={},this._win=win;var getWindow=this.getWindow;win&&win.document&&(this._unobserve=observeMutations(win.document,this,Instance_updateTabsterByAttribute)),this.keyboardNavigation=new KeyboardNavigation_KeyboardNavigationState(getWindow),this.focusedElement=new FocusedElement_FocusedElementState(this,getWindow),this.focusable=new Focusable_FocusableAPI(this,getWindow),this.root=new Root_RootAPI(this,(function(){Focusable_FocusableAPI.forgetFocusedGrouppers(_this.focusable)}),null==props?void 0:props.autoRoot),function startWeakRefStorageCleanup(getWindow){var context=getInstanceContext(getWindow);context.weakCleanupStarted||(context.weakCleanupStarted=!0,context.WeakRef=function getWeakRef(context){return context.basics.WeakRef}(context)),context.weakCleanupTimer||(context.weakCleanupTimer=getWindow().setTimeout((function(){context.weakCleanupTimer=void 0,cleanupWeakRefStorage(getWindow),startWeakRefStorageCleanup(getWindow)}),12e4))}(getWindow)}return function Tabster_createClass(Constructor,protoProps,staticProps){return protoProps&&Tabster_defineProperties(Constructor.prototype,protoProps),staticProps&&Tabster_defineProperties(Constructor,staticProps),Constructor}(Tabster,[{key:"dispose",value:function dispose(){var _this$_win,_this$_win2;(this._unobserve&&(this._unobserve(),delete this._unobserve),this._forgetMemorizedElements=[],this._win&&this._forgetMemorizedTimer&&(this._win.clearTimeout(this._forgetMemorizedTimer),delete this._forgetMemorizedTimer),this.outlineDispose&&(this.outlineDispose(),delete this.outline,delete this.outlineDispose),this.crossOriginDispose&&(this.crossOriginDispose(),delete this.crossOrigin,delete this.crossOriginDispose),this.deloserDispose&&(this.deloserDispose(),delete this.deloser,delete this.deloserDispose),this.modalizerDispose&&(this.modalizerDispose(),delete this.modalizer,delete this.modalizerDispose),this.observedElementDispose&&(this.observedElementDispose(),delete this.observedElement,delete this.observedElementDispose),KeyboardNavigation_KeyboardNavigationState.dispose(this.keyboardNavigation),Focusable_FocusableAPI.dispose(this.focusable),FocusedElement_FocusedElementState.dispose(this.focusedElement),Root_RootAPI.dispose(this.root),function stopWeakRefStorageCleanupAndClearStorage(getWindow){var context=getInstanceContext(getWindow);context.weakCleanupStarted=!1,context.weakCleanupTimer&&(getWindow().clearTimeout(context.weakCleanupTimer),context.weakCleanupTimer=void 0,context.weakElementStorage={})}(this.getWindow),clearElementCache(this.getWindow),this._storage={},null!==(_this$_win=this._win)&&void 0!==_this$_win&&_this$_win.__tabsterInstance)&&(null===(_this$_win2=this._win)||void 0===_this$_win2||delete _this$_win2.__tabsterInstance);delete this._win}},{key:"storageEntry",value:function storageEntry(uid,addremove){var entry=this._storage[uid];return entry?!1===addremove&&0===Object.keys(entry).length&&delete this._storage[uid]:!0===addremove&&(entry=this._storage[uid]={}),entry}}],[{key:"dispose",value:function dispose(instance){instance.dispose()}},{key:"forceCleanup",value:function forceCleanup(tabster){tabster._win&&(tabster._forgetMemorizedElements.push(tabster._win.document.body),tabster._forgetMemorizedTimer||(tabster._forgetMemorizedTimer=tabster._win.setTimeout((function(){delete tabster._forgetMemorizedTimer;for(var el=tabster._forgetMemorizedElements.shift();el;el=tabster._forgetMemorizedElements.shift())clearElementCache(tabster.getWindow,el),FocusedElement_FocusedElementState.forgetMemorized(tabster.focusedElement,el)}),0),cleanupWeakRefStorage(tabster.getWindow,!0)))}}]),Tabster}();function createTabster(win,props){var existingAh=getCurrentTabster(win);if(existingAh)return existingAh;var tabster=new Tabster_Tabster(win,props);return win.__tabsterInstance=tabster,tabster}function Tabster_getDeloser(tabster,props){var tabsterInternal=tabster;if(!tabsterInternal.deloser){var deloser=new Deloser_DeloserAPI(tabster,props);tabsterInternal.deloser=deloser,tabsterInternal.deloserDispose=function(){Deloser_DeloserAPI.dispose(deloser)}}return tabsterInternal.deloser}function getModalizer(tabster){var tabsterInternal=tabster;if(!tabsterInternal.modalizer){var modalizer=new Modalizer_ModalizerAPI(tabster);tabsterInternal.modalizer=modalizer,tabsterInternal.modalizerDispose=function(){Modalizer_ModalizerAPI.dispose(modalizer)}}return tabsterInternal.modalizer}function disposeTabster(tabster){Tabster_Tabster.dispose(tabster)}function getTabsterAttribute(props,plain){var attr=props?JSON.stringify(props):void 0;return!0===plain?attr:function Tabster_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}({},TabsterAttributeName,attr)}function getCurrentTabster(win){return win.__tabsterInstance}},334:function(module,exports,__webpack_require__){__webpack_require__(335),__webpack_require__(492),__webpack_require__(493),__webpack_require__(689),module.exports=__webpack_require__(682)},402:function(module,exports){},493:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__(259)},682:function(module,exports,__webpack_require__){"use strict";(function(module){(0,__webpack_require__(259).configure)([__webpack_require__(683),__webpack_require__(684)],module,!1)}).call(this,__webpack_require__(207)(module))},683:function(module,exports){function webpackEmptyContext(req){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}webpackEmptyContext.keys=function(){return[]},webpackEmptyContext.resolve=webpackEmptyContext,module.exports=webpackEmptyContext,webpackEmptyContext.id=683},684:function(module,exports,__webpack_require__){var map={"./Focusable.stories.tsx":685,"./Groupper.stories.tsx":688,"./KeyboardNavigationState.stories.tsx":686,"./Modalizer.stories.tsx":690,"./Mover.stories.tsx":687};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=684},685:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"IgnoreAriaDisabled",(function(){return IgnoreAriaDisabled}));__webpack_require__(18);var react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2),tabster__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(24),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(0);__webpack_exports__.default={title:"Focusable"};var IgnoreAriaDisabled=function IgnoreAriaDisabled(){var ref=react__WEBPACK_IMPORTED_MODULE_1__.useRef(null),tabster=Object(tabster__WEBPACK_IMPORTED_MODULE_2__.d)(window);return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("div",{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("button",{onClick:function onClick(){var _tabster$focusable$fi;console.log(null==tabster?void 0:tabster.focusable.findNext(ref.current)),null==tabster||null===(_tabster$focusable$fi=tabster.focusable.findNext(ref.current,void 0,!0))||void 0===_tabster$focusable$fi||_tabster$focusable$fi.focus()},ref:ref,children:"Focus aria disabled element"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("div",Object.assign({"aria-disabled":!0,tabIndex:-1},Object(tabster__WEBPACK_IMPORTED_MODULE_2__.g)({focusable:{ignoreAriaDisabled:!0}}),{children:"aria-disabled element"}))]})};IgnoreAriaDisabled.displayName="IgnoreAriaDisabled"},686:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"KeyboardNavigationState",(function(){return KeyboardNavigationState}));__webpack_require__(28),__webpack_require__(29),__webpack_require__(10),__webpack_require__(32),__webpack_require__(20),__webpack_require__(14),__webpack_require__(22),__webpack_require__(43),__webpack_require__(34),__webpack_require__(53);var react__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(2),tabster__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(24),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(0);function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}__webpack_exports__.default={title:"KeyboardNavigationState"};var KeyboardNavigationState=function KeyboardNavigationState(){var _React$useState2=_slicedToArray(react__WEBPACK_IMPORTED_MODULE_10__.useState("undetermined"),2),message=_React$useState2[0],setMessage=_React$useState2[1],onFocus=function onFocus(){var tabster=Object(tabster__WEBPACK_IMPORTED_MODULE_11__.d)(window),isKeyboard=null==tabster?void 0:tabster.keyboardNavigation.isNavigatingWithKeyboard();setMessage(isKeyboard?"keyboard":"mouse")};return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.Fragment,{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)("div",{children:["Focused with: ",Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)("strong",{children:message})]}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)("button",{onFocus:onFocus,children:"Click or use keyboard"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)("button",{onFocus:onFocus,children:"Click or use keyboard"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)("button",{onFocus:onFocus,children:"Click or use keyboard"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)("button",{onFocus:onFocus,children:"Click or use keyboard"})]})}},687:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"ArrowNavigationVertical",(function(){return ArrowNavigationVertical})),__webpack_require__.d(__webpack_exports__,"ArrowNavigationHorizontal",(function(){return ArrowNavigationHorizontal})),__webpack_require__.d(__webpack_exports__,"ArrowNavigationHorizontalRtl",(function(){return ArrowNavigationHorizontalRtl})),__webpack_require__.d(__webpack_exports__,"ArrowNavigationCircular",(function(){return ArrowNavigationCircular})),__webpack_require__.d(__webpack_exports__,"NestedMovers",(function(){return NestedMovers}));__webpack_require__(18),__webpack_require__(2);var tabster__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(24),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(0);__webpack_exports__.default={title:"Mover"};var Collection=function Collection(){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.Fragment,{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("button",{children:"A"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("button",{children:"bunch"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("button",{children:"of"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("button",{children:"buttons"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("button",{children:"which"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("button",{children:"are"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("button",{children:"navigable"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("button",{children:"using"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("button",{children:"arrows"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("button",{children:"instead"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("button",{children:"of"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("button",{children:"tabs"})]})},ArrowNavigationVertical=function ArrowNavigationVertical(){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("div",Object.assign({},Object(tabster__WEBPACK_IMPORTED_MODULE_2__.g)({focusable:{mover:{navigationType:tabster__WEBPACK_IMPORTED_MODULE_2__.a.MoverKeys.Arrows,axis:tabster__WEBPACK_IMPORTED_MODULE_2__.a.MoverAxis.Vertical}}}),{children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(Collection,{})}))};ArrowNavigationVertical.displayName="ArrowNavigationVertical";var ArrowNavigationHorizontal=function ArrowNavigationHorizontal(){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("div",Object.assign({},Object(tabster__WEBPACK_IMPORTED_MODULE_2__.g)({focusable:{mover:{navigationType:tabster__WEBPACK_IMPORTED_MODULE_2__.a.MoverKeys.Arrows,axis:tabster__WEBPACK_IMPORTED_MODULE_2__.a.MoverAxis.Horizontal}}}),{children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(Collection,{})}))};ArrowNavigationHorizontal.displayName="ArrowNavigationHorizontal";var ArrowNavigationHorizontalRtl=function ArrowNavigationHorizontalRtl(){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("div",Object.assign({dir:"rtl"},Object(tabster__WEBPACK_IMPORTED_MODULE_2__.g)({focusable:{mover:{navigationType:tabster__WEBPACK_IMPORTED_MODULE_2__.a.MoverKeys.Arrows,axis:tabster__WEBPACK_IMPORTED_MODULE_2__.a.MoverAxis.Horizontal}}}),{children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(Collection,{})}))};ArrowNavigationHorizontalRtl.displayName="ArrowNavigationHorizontalRtl";var ArrowNavigationCircular=function ArrowNavigationCircular(){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("div",Object.assign({},Object(tabster__WEBPACK_IMPORTED_MODULE_2__.g)({focusable:{mover:{cyclic:!0,navigationType:tabster__WEBPACK_IMPORTED_MODULE_2__.a.MoverKeys.Arrows,axis:tabster__WEBPACK_IMPORTED_MODULE_2__.a.MoverAxis.Vertical}}}),{children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(Collection,{})}))};ArrowNavigationCircular.displayName="ArrowNavigationCircular";var NestedMovers=function NestedMovers(){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("div",{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("button",{children:"Tabstop"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("div",Object.assign({style:{border:"1px solid",padding:10}},Object(tabster__WEBPACK_IMPORTED_MODULE_2__.g)({focusable:{mover:{cyclic:!0,navigationType:tabster__WEBPACK_IMPORTED_MODULE_2__.a.MoverKeys.Arrows,axis:tabster__WEBPACK_IMPORTED_MODULE_2__.a.MoverAxis.Vertical}}}),{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(Collection,{}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("div",Object.assign({style:{marginLeft:10,marginTop:10}},Object(tabster__WEBPACK_IMPORTED_MODULE_2__.g)({focusable:{mover:{cyclic:!0,navigationType:tabster__WEBPACK_IMPORTED_MODULE_2__.a.MoverKeys.Arrows,axis:tabster__WEBPACK_IMPORTED_MODULE_2__.a.MoverAxis.Vertical}}}),{children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(Collection,{})})),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("div",{style:{paddingTop:10},children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("button",{children:"In root mover"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("button",{children:"In root mover"})]})]})),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("button",{children:"Tabstop"})]})};NestedMovers.displayName="NestedMovers"},688:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"NestedGrouppers",(function(){return Groupper_stories_NestedGrouppers})),__webpack_require__.d(__webpack_exports__,"GroupperRtl",(function(){return Groupper_stories_GroupperRtl})),__webpack_require__.d(__webpack_exports__,"AccordionPrototype",(function(){return Groupper_stories_AccordionPrototype}));__webpack_require__(18),__webpack_require__(77),__webpack_require__(54),__webpack_require__(78),__webpack_require__(28),__webpack_require__(29),__webpack_require__(10),__webpack_require__(32),__webpack_require__(20),__webpack_require__(14),__webpack_require__(22);var react=__webpack_require__(2),Tabster=__webpack_require__(24),jsx_runtime=__webpack_require__(0);function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?_assertThisInitialized(self):call}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}var AccordionContext=react.createContext(void 0),Accordion_Accordion=function(_React$PureComponent){_inherits(Accordion,_React$PureComponent);var _super=_createSuper(Accordion);function Accordion(props){var _this;return _classCallCheck(this,Accordion),(_this=_super.call(this,props)).expandedSection=void 0,_this.state={hasFocus:!1},_this}return _createClass(Accordion,[{key:"render",value:function render(){return Object(jsx_runtime.jsx)("div",{className:"Accordion".concat(this.state.hasFocus?" focus":""),children:Object(jsx_runtime.jsx)(AccordionContext.Provider,{value:this,children:this.props.children})})}}]),Accordion}(react.PureComponent),Accordion_AccordionSection=function(_React$PureComponent2){_inherits(AccordionSection,_React$PureComponent2);var _super2=_createSuper(AccordionSection);function AccordionSection(props,context){var _this2;return _classCallCheck(this,AccordionSection),(_this2=_super2.call(this,props))._index=void 0,_this2._div=void 0,_this2._accordion=void 0,_this2._onRef=function(div){var tabster=Object(Tabster.d)(window);if(div)_this2._div=div,null==tabster||tabster.focusable.addGroupper(div,void 0,{onChange:_this2._onChange}),_this2._accordion&&!_this2._accordion.expandedSection&&(_this2._accordion.expandedSection=_assertThisInitialized(_this2),_this2.setState({isExpanded:!0}));else if(_this2._div){var _this2$_accordion;null==tabster||tabster.focusable.removeGroupper(_this2._div),(null===(_this2$_accordion=_this2._accordion)||void 0===_this2$_accordion?void 0:_this2$_accordion.expandedSection)===_assertThisInitialized(_this2)&&(_this2._accordion.expandedSection=void 0),delete _this2._div}},_this2._toggle=function(){_this2._accordion&&(_this2._accordion.expandedSection&&_this2._accordion.expandedSection!==_assertThisInitialized(_this2)&&_this2._accordion.expandedSection.setState({isExpanded:!1}),_this2._accordion.expandedSection=_assertThisInitialized(_this2),_this2.setState({isExpanded:!0}))},_this2._onChange=function(state){if(_this2._div&&_this2._accordion){var hasFocus=state.hasFocus||state.siblingHasFocus;_this2._accordion.state.hasFocus!==hasFocus&&_this2._accordion.setState({hasFocus:hasFocus})}},_this2.state={isExpanded:!1},_this2._index=++AccordionSection._index,_this2}return _createClass(AccordionSection,[{key:"render",value:function render(){var _this3=this;return Object(jsx_runtime.jsx)(AccordionContext.Consumer,{children:function children(accordion){return _this3._accordion=accordion,Object(jsx_runtime.jsxs)("div",{ref:_this3._onRef,children:[Object(jsx_runtime.jsx)("h3",{children:Object(jsx_runtime.jsx)("button",{"aria-expanded":!!_this3.state.isExpanded||void 0,className:"Accordion-trigger","aria-controls":"accordion-section-".concat(_this3._index),id:"accordion-section-title-".concat(_this3._index),onClick:_this3._toggle,children:Object(jsx_runtime.jsxs)("span",{className:"Accordion-title",children:[_this3.props.title,Object(jsx_runtime.jsx)("span",{className:"Accordion-icon"})]})})}),Object(jsx_runtime.jsx)("div",{id:"accordion-section-".concat(_this3._index),role:"region","aria-labelledby":"accordion-section-title-".concat(_this3._index),className:"Accordion-panel",hidden:!_this3.state.isExpanded||void 0,children:Object(jsx_runtime.jsx)("div",{children:_this3.props.children})})]})}})}}]),AccordionSection}(react.PureComponent);Accordion_AccordionSection._index=0;try{Accordion_Accordion.displayName="Accordion",Accordion_Accordion.__docgenInfo={description:"",displayName:"Accordion",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Accordion.tsx#Accordion"]={docgenInfo:Accordion_Accordion.__docgenInfo,name:"Accordion",path:"src/components/Accordion.tsx#Accordion"})}catch(__react_docgen_typescript_loader_error){}try{Accordion_AccordionSection.displayName="AccordionSection",Accordion_AccordionSection.__docgenInfo={description:"",displayName:"AccordionSection",props:{title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Accordion.tsx#AccordionSection"]={docgenInfo:Accordion_AccordionSection.__docgenInfo,name:"AccordionSection",path:"src/components/Accordion.tsx#AccordionSection"})}catch(__react_docgen_typescript_loader_error){}function Item_typeof(obj){return(Item_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function Item_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function Item_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function Item_setPrototypeOf(o,p){return(Item_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function Item_createSuper(Derived){var hasNativeReflectConstruct=function Item_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=Item_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=Item_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return Item_possibleConstructorReturn(this,result)}}function Item_possibleConstructorReturn(self,call){return!call||"object"!==Item_typeof(call)&&"function"!=typeof call?function Item_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function Item_getPrototypeOf(o){return(Item_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}var Item_Item=function(_React$PureComponent){!function Item_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&Item_setPrototypeOf(subClass,superClass)}(Item,_React$PureComponent);var _super=Item_createSuper(Item);function Item(){return Item_classCallCheck(this,Item),_super.apply(this,arguments)}return function Item_createClass(Constructor,protoProps,staticProps){return protoProps&&Item_defineProperties(Constructor.prototype,protoProps),staticProps&&Item_defineProperties(Constructor,staticProps),Constructor}(Item,[{key:"render",value:function render(){return Object(jsx_runtime.jsx)("div",Object.assign({tabIndex:0,className:"item"},Object(Tabster.g)({groupper:{isLimited:Tabster.a.GroupperFocusLimits.LimitedTrapFocus}}),{children:this.props.children?this.props.children:Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)("button",{onClick:this.props.onClick,children:"Hello"}),Object(jsx_runtime.jsx)("button",{onClick:this.props.onClick,children:"World"})]})}))}}]),Item}(react.PureComponent);try{Item_Item.displayName="Item",Item_Item.__docgenInfo={description:"",displayName:"Item",props:{onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Item.tsx#Item"]={docgenInfo:Item_Item.__docgenInfo,name:"Item",path:"src/components/Item.tsx#Item"})}catch(__react_docgen_typescript_loader_error){}__webpack_exports__.default={title:"Groupper"};var Groupper_stories_NestedGrouppers=function NestedGrouppers(){return Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:Object(jsx_runtime.jsx)("div",Object.assign({"aria-label":"Main"},Object(Tabster.g)({deloser:{}}),{children:Object(jsx_runtime.jsxs)("div",{children:[Object(jsx_runtime.jsx)(Item_Item,{}),Object(jsx_runtime.jsx)(Item_Item,{}),Object(jsx_runtime.jsx)(Item_Item,{children:Object(jsx_runtime.jsxs)("div",{children:[Object(jsx_runtime.jsx)(Item_Item,{}),Object(jsx_runtime.jsx)(Item_Item,{children:Object(jsx_runtime.jsxs)("div",{children:[Object(jsx_runtime.jsx)(Item_Item,{}),Object(jsx_runtime.jsx)(Item_Item,{}),Object(jsx_runtime.jsx)(Item_Item,{children:Object(jsx_runtime.jsxs)("div",{children:[Object(jsx_runtime.jsx)(Item_Item,{}),Object(jsx_runtime.jsx)(Item_Item,{}),Object(jsx_runtime.jsx)(Item_Item,{})]})}),Object(jsx_runtime.jsx)(Item_Item,{}),Object(jsx_runtime.jsx)(Item_Item,{})]})}),Object(jsx_runtime.jsx)(Item_Item,{})]})}),Object(jsx_runtime.jsx)(Item_Item,{}),Object(jsx_runtime.jsx)(Item_Item,{})]})}))})},Groupper_stories_GroupperRtl=function GroupperRtl(){return Object(jsx_runtime.jsxs)("div",{dir:"rtl",style:{display:"flex"},children:[Object(jsx_runtime.jsx)(Item_Item,{}),Object(jsx_runtime.jsx)(Item_Item,{}),Object(jsx_runtime.jsx)(Item_Item,{})]})};Groupper_stories_GroupperRtl.displayName="GroupperRtl";var Groupper_stories_AccordionPrototype=function AccordionPrototype(){return Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:Object(jsx_runtime.jsxs)(Accordion_Accordion,{children:[Object(jsx_runtime.jsx)(Accordion_AccordionSection,{title:"Personal Information",children:Object(jsx_runtime.jsxs)("fieldset",{children:[Object(jsx_runtime.jsxs)("p",{children:[Object(jsx_runtime.jsxs)("label",{htmlFor:"cufc1",children:["Name",Object(jsx_runtime.jsx)("span",{"aria-hidden":"true",children:"*"}),":"]}),Object(jsx_runtime.jsx)("input",{type:"text",defaultValue:"",name:"Name",id:"cufc1",className:"required","aria-required":"true"})]}),Object(jsx_runtime.jsxs)("p",{children:[Object(jsx_runtime.jsxs)("label",{htmlFor:"cufc2",children:["Email",Object(jsx_runtime.jsx)("span",{"aria-hidden":"true",children:"*"}),":"]}),Object(jsx_runtime.jsx)("input",{type:"text",defaultValue:"",name:"Email",id:"cufc2","aria-required":"true"})]}),Object(jsx_runtime.jsxs)("p",{children:[Object(jsx_runtime.jsx)("label",{htmlFor:"cufc3",children:"Phone:"}),Object(jsx_runtime.jsx)("input",{type:"text",defaultValue:"",name:"Phone",id:"cufc3"})]}),Object(jsx_runtime.jsxs)("p",{children:[Object(jsx_runtime.jsx)("label",{htmlFor:"cufc4",children:"Extension:"}),Object(jsx_runtime.jsx)("input",{type:"text",defaultValue:"",name:"Ext",id:"cufc4"})]}),Object(jsx_runtime.jsxs)("p",{children:[Object(jsx_runtime.jsx)("label",{htmlFor:"cufc5",children:"Country:"}),Object(jsx_runtime.jsx)("input",{type:"text",defaultValue:"",name:"Country",id:"cufc5"})]}),Object(jsx_runtime.jsxs)("p",{children:[Object(jsx_runtime.jsx)("label",{htmlFor:"cufc6",children:"City/Province:"}),Object(jsx_runtime.jsx)("input",{type:"text",defaultValue:"",name:"City_Province",id:"cufc6"})]})]})}),Object(jsx_runtime.jsx)(Accordion_AccordionSection,{title:"Billing Address",children:Object(jsx_runtime.jsxs)("fieldset",{children:[Object(jsx_runtime.jsxs)("p",{children:[Object(jsx_runtime.jsx)("label",{htmlFor:"b-add1",children:"Address 1:"}),Object(jsx_runtime.jsx)("input",{type:"text",name:"b-add1",id:"b-add1"})]}),Object(jsx_runtime.jsxs)("p",{children:[Object(jsx_runtime.jsx)("label",{htmlFor:"b-add2",children:"Address 2:"}),Object(jsx_runtime.jsx)("input",{type:"text",name:"b-add2",id:"b-add2"})]}),Object(jsx_runtime.jsxs)("p",{children:[Object(jsx_runtime.jsx)("label",{htmlFor:"b-city",children:"City:"}),Object(jsx_runtime.jsx)("input",{type:"text",name:"b-city",id:"b-city"})]}),Object(jsx_runtime.jsxs)("p",{children:[Object(jsx_runtime.jsx)("label",{htmlFor:"b-state",children:"State:"}),Object(jsx_runtime.jsx)("input",{type:"text",name:"b-state",id:"b-state"})]}),Object(jsx_runtime.jsxs)("p",{children:[Object(jsx_runtime.jsx)("label",{htmlFor:"b-zip",children:"Zip Code:"}),Object(jsx_runtime.jsx)("input",{type:"text",name:"b-zip",id:"b-zip"})]})]})}),Object(jsx_runtime.jsx)(Accordion_AccordionSection,{title:"Shipping Address",children:Object(jsx_runtime.jsxs)("fieldset",{children:[Object(jsx_runtime.jsxs)("p",{children:[Object(jsx_runtime.jsx)("label",{htmlFor:"m-add1",children:"Address 1:"}),Object(jsx_runtime.jsx)("input",{type:"text",name:"m-add1",id:"m-add1"})]}),Object(jsx_runtime.jsxs)("p",{children:[Object(jsx_runtime.jsx)("label",{htmlFor:"m-add2",children:"Address 2:"}),Object(jsx_runtime.jsx)("input",{type:"text",name:"m-add2",id:"m-add2"})]}),Object(jsx_runtime.jsxs)("p",{children:[Object(jsx_runtime.jsx)("label",{htmlFor:"m-city",children:"City:"}),Object(jsx_runtime.jsx)("input",{type:"text",name:"m-city",id:"m-city"})]}),Object(jsx_runtime.jsxs)("p",{children:[Object(jsx_runtime.jsx)("label",{htmlFor:"m-state",children:"State:"}),Object(jsx_runtime.jsx)("input",{type:"text",name:"m-state",id:"m-state"})]}),Object(jsx_runtime.jsxs)("p",{children:[Object(jsx_runtime.jsx)("label",{htmlFor:"m-zip",children:"Zip Code:"}),Object(jsx_runtime.jsx)("input",{type:"text",name:"m-zip",id:"m-zip"})]})]})})]})})}},689:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var preview_namespaceObject={};__webpack_require__.r(preview_namespaceObject),__webpack_require__.d(preview_namespaceObject,"parameters",(function(){return parameters})),__webpack_require__.d(preview_namespaceObject,"decorators",(function(){return decorators}));__webpack_require__(19),__webpack_require__(28),__webpack_require__(52),__webpack_require__(149),__webpack_require__(37),__webpack_require__(639);var client_api=__webpack_require__(691),esm=__webpack_require__(4),react=(__webpack_require__(18),__webpack_require__(2)),Tabster=__webpack_require__(24),jsx_runtime=__webpack_require__(0),parameters={actions:{argTypesRegex:"^on[A-Z].*"}},decorators=[function(Story){return react.useState((function(){var tabster=Object(Tabster.b)(window);Object(Tabster.f)(tabster),Object(Tabster.e)(tabster)})),react.useEffect((function(){return function(){Object(Tabster.d)(window)&&Object(Tabster.c)(Object(Tabster.d)(window))}}),[]),Object(jsx_runtime.jsx)("div",Object.assign({},Object(Tabster.g)({root:{}}),{children:Object(jsx_runtime.jsx)(Story,{})}))}];function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}Object.keys(preview_namespaceObject).forEach((function(key){var value=preview_namespaceObject[key];switch(key){case"args":case"argTypes":return esm.a.warn("Invalid args/argTypes in config, ignoring.",JSON.stringify(value));case"decorators":return value.forEach((function(decorator){return Object(client_api.b)(decorator,!1)}));case"loaders":return value.forEach((function(loader){return Object(client_api.c)(loader,!1)}));case"parameters":return Object(client_api.d)(function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},value),!1);case"argTypesEnhancers":return value.forEach((function(enhancer){return Object(client_api.a)(enhancer)}));case"globals":case"globalTypes":var v={};return v[key]=value,Object(client_api.d)(v,!1);default:return console.log(key+" was not supported :( !")}}))},690:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"ModalDialog",(function(){return Modalizer_stories_ModalDialog})),__webpack_require__.d(__webpack_exports__,"NativeFocus",(function(){return Modalizer_stories_NativeFocus})),__webpack_require__.d(__webpack_exports__,"ModalizerAPIFocus",(function(){return Modalizer_stories_ModalizerAPIFocus})),__webpack_require__.d(__webpack_exports__,"AlwaysOnPage",(function(){return Modalizer_stories_AlwaysOnPage})),__webpack_require__.d(__webpack_exports__,"AllowFocusOutside",(function(){return Modalizer_stories_AllowFocusOutside})),__webpack_require__.d(__webpack_exports__,"ModalizerStack",(function(){return Modalizer_stories_ModalizerStack}));__webpack_require__(18),__webpack_require__(28),__webpack_require__(29),__webpack_require__(10),__webpack_require__(32),__webpack_require__(20),__webpack_require__(14),__webpack_require__(22),__webpack_require__(43),__webpack_require__(34),__webpack_require__(53),__webpack_require__(77),__webpack_require__(54),__webpack_require__(78);var react=__webpack_require__(2),Tabster=__webpack_require__(24),jsx_runtime=__webpack_require__(0);function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}var Modal_Modal=function(_React$PureComponent){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(Modal,_React$PureComponent);var _super=_createSuper(Modal);function Modal(props){var _this;!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Modal),(_this=_super.call(this,props))._div=void 0,_this.tabsterModalizer=void 0,_this.tabsterDeloser=void 0,_this._onRef=function(el){_this.tabsterModalizer&&_this.tabsterDeloser&&(el?(_this._div=el,_this.tabsterModalizer.add(el,{id:"modal"}),_this.tabsterDeloser.add(el),_this.tabsterModalizer.focus(el)):_this._div&&(_this.tabsterModalizer.remove(_this._div),_this.tabsterDeloser.remove(_this._div),_this._div=void 0))},_this._onBtnClick=function(){_this.setState({isVisible:!1})},_this.state={isVisible:!1};var tabsterInstance=Object(Tabster.d)(window);return tabsterInstance&&(_this.tabsterModalizer=Object(Tabster.f)(tabsterInstance),_this.tabsterDeloser=Object(Tabster.e)(tabsterInstance)),_this}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(Modal,[{key:"render",value:function render(){return this.state.isVisible?Object(jsx_runtime.jsxs)("div",{children:[Object(jsx_runtime.jsx)("div",{className:"lightbox"}),Object(jsx_runtime.jsxs)("div",{ref:this._onRef,"aria-label":"Modal",role:"region",className:"modal",children:[Object(jsx_runtime.jsx)("h3",{children:"Piu piu"}),Object(jsx_runtime.jsx)("button",{onClick:this._onBtnClick,children:"Close"})," or ",Object(jsx_runtime.jsx)("button",{onClick:this._onBtnClick,children:"Dismiss"})]})]}):null}},{key:"show",value:function show(){this.setState({isVisible:!0})}}]),Modal}(react.PureComponent);try{Modal_Modal.displayName="Modal",Modal_Modal.__docgenInfo={description:"",displayName:"Modal",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Modal.tsx#Modal"]={docgenInfo:Modal_Modal.__docgenInfo,name:"Modal",path:"src/components/Modal.tsx#Modal"})}catch(__react_docgen_typescript_loader_error){}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}__webpack_exports__.default={title:"Modalizer"};var Modalizer_stories_ModalDialog=function ModalDialog(){var ref=react.useRef(null);return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)("div",Object.assign({},Object(Tabster.g)({deloser:{}}),{children:Object(jsx_runtime.jsx)("button",{onClick:function onClick(){var _ref$current;return null===(_ref$current=ref.current)||void 0===_ref$current?void 0:_ref$current.show()},children:"Open modal"})})),Object(jsx_runtime.jsx)(Modal_Modal,{ref:ref})]})},popupStyles={maxWidth:400,maxHeight:400,border:"2px solid green",padding:5,marginTop:5,marginBottom:5},Modalizer_stories_NativeFocus=function NativeFocus(){var _React$useState2=_slicedToArray(react.useState(!1),2),open=_React$useState2[0],setOpen=_React$useState2[1],popupRef=react.useRef(null);react.useEffect((function(){if(open&&popupRef.current){var _getCurrentTabster,first=null===(_getCurrentTabster=Object(Tabster.d)(window))||void 0===_getCurrentTabster?void 0:_getCurrentTabster.focusable.findFirst(popupRef.current);null==first||first.focus()}}),[popupRef,open]);var onClick=function onClick(){return setOpen((function(s){return!s}))};return Object(jsx_runtime.jsxs)("div",Object.assign({},Object(Tabster.g)({deloser:{}}),{children:[Object(jsx_runtime.jsx)("button",{onClick:onClick,children:"Toggle popup"}),open&&Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsxs)("div",Object.assign({ref:popupRef,"aria-label":"popup",style:popupStyles},Object(Tabster.g)({deloser:{},modalizer:{id:"modalizer"}}),{children:[Object(jsx_runtime.jsx)("div",{tabIndex:0,children:"Focusable item"}),Object(jsx_runtime.jsx)("div",{tabIndex:0,children:"Focusable item"}),Object(jsx_runtime.jsx)("div",{tabIndex:0,children:"Focusable item"}),Object(jsx_runtime.jsx)("div",{tabIndex:0,children:"Focusable item"}),Object(jsx_runtime.jsx)("button",{onClick:onClick,children:"Dismiss"})]})),Object(jsx_runtime.jsx)("button",{children:"Outside Modalizer"})]})]}))};Modalizer_stories_NativeFocus.displayName="NativeFocus";var Modalizer_stories_ModalizerAPIFocus=function ModalizerAPIFocus(){var _React$useState4=_slicedToArray(react.useState(!1),2),open=_React$useState4[0],setOpen=_React$useState4[1],popupRef=react.useRef(null);react.useEffect((function(){var tabster=Object(Tabster.d)(window),modalizer=tabster&&Object(Tabster.f)(tabster);open&&popupRef.current&&modalizer&&modalizer.focus(popupRef.current)}),[open,popupRef]);var onClick=function onClick(){return setOpen((function(s){return!s}))};return Object(jsx_runtime.jsxs)("div",Object.assign({},Object(Tabster.g)({deloser:{}}),{children:[Object(jsx_runtime.jsx)("button",{onClick:onClick,children:"Toggle popup"}),open&&Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsxs)("div",Object.assign({ref:popupRef,"aria-label":"popup",style:popupStyles},Object(Tabster.g)({deloser:{},modalizer:{id:"modalizer"}}),{children:[Object(jsx_runtime.jsx)("div",{tabIndex:0,children:"Focusable item"}),Object(jsx_runtime.jsx)("div",{tabIndex:0,children:"Focusable item"}),Object(jsx_runtime.jsx)("div",{tabIndex:0,children:"Focusable item"}),Object(jsx_runtime.jsx)("div",{tabIndex:0,children:"Focusable item"}),Object(jsx_runtime.jsx)("button",{onClick:onClick,children:"Dismiss"})]})),Object(jsx_runtime.jsx)("button",{children:"Outside Modalizer"})]})]}))};Modalizer_stories_ModalizerAPIFocus.displayName="ModalizerAPIFocus";var Modalizer_stories_AlwaysOnPage=function AlwaysOnPage(){var modalRef=react.useRef(null),outsideRef=react.useRef(null);return Object(jsx_runtime.jsxs)("div",Object.assign({},Object(Tabster.g)({deloser:{}}),{children:[Object(jsx_runtime.jsx)("button",{onClick:function focusIn(){if(modalRef.current){var _getCurrentTabster2;modalRef.current.removeAttribute("aria-hidden");var first=null===(_getCurrentTabster2=Object(Tabster.d)(window))||void 0===_getCurrentTabster2?void 0:_getCurrentTabster2.focusable.findFirst(modalRef.current);null==first||first.focus()}},children:"Focus modalizer"}),Object(jsx_runtime.jsxs)("div",Object.assign({"aria-hidden":!0,ref:modalRef,"aria-label":"popup",style:popupStyles},Object(Tabster.g)({modalizer:{id:"modalizer"}}),{children:[Object(jsx_runtime.jsx)("div",{tabIndex:0,children:"Focusable item"}),Object(jsx_runtime.jsx)("div",{tabIndex:0,children:"Focusable item"}),Object(jsx_runtime.jsx)("div",{tabIndex:0,children:"Focusable item"}),Object(jsx_runtime.jsx)("div",{tabIndex:0,children:"Focusable item"}),Object(jsx_runtime.jsx)("button",{onClick:function focusOut(){modalRef.current&&outsideRef.current&&(modalRef.current.setAttribute("aria-hidden","true"),outsideRef.current.focus())},children:"Focus out"})]})),Object(jsx_runtime.jsx)("button",{ref:outsideRef,children:"Outside modal"})]}))};Modalizer_stories_AlwaysOnPage.displayName="AlwaysOnPage";var Modalizer_stories_AllowFocusOutside=function AllowFocusOutside(){var modalRef=react.useRef(null),outsideRef=react.useRef(null);return Object(jsx_runtime.jsxs)("div",Object.assign({},Object(Tabster.g)({deloser:{}}),{children:[Object(jsx_runtime.jsx)("button",{onClick:function focusIn(){if(modalRef.current){var _getCurrentTabster3;modalRef.current.removeAttribute("aria-hidden");var first=null===(_getCurrentTabster3=Object(Tabster.d)(window))||void 0===_getCurrentTabster3?void 0:_getCurrentTabster3.focusable.findFirst(modalRef.current);null==first||first.focus()}},children:"Activate modalizer"}),Object(jsx_runtime.jsxs)("div",Object.assign({"aria-hidden":!0,ref:modalRef,"aria-label":"popup",style:popupStyles},Object(Tabster.g)({modalizer:{id:"modalizer",isOthersAccessible:!0}}),{children:[Object(jsx_runtime.jsx)("div",{tabIndex:0,children:"Focusable item"}),Object(jsx_runtime.jsx)("div",{tabIndex:0,children:"Focusable item"}),Object(jsx_runtime.jsx)("div",{tabIndex:0,children:"Focusable item"}),Object(jsx_runtime.jsx)("div",{tabIndex:0,children:"Focusable item"}),Object(jsx_runtime.jsx)("button",{onClick:function focusOut(){modalRef.current&&outsideRef.current&&(modalRef.current.setAttribute("aria-hidden","true"),outsideRef.current.focus())},children:"Deactivate modalizer"})]})),Object(jsx_runtime.jsx)("button",{ref:outsideRef,children:"Outside modal"})]}))};Modalizer_stories_AllowFocusOutside.displayName="AllowFocusOutside";var Modalizer_stories_ModalizerStack=function ModalizerStack(){var _React$useState6=_slicedToArray(react.useState(!1),2),open=_React$useState6[0],setOpen=_React$useState6[1],_React$useState8=_slicedToArray(react.useState(!1),2),secondOpen=_React$useState8[0],setSecondOpen=_React$useState8[1],_React$useState10=_slicedToArray(react.useState(!1),2),thirdOpen=_React$useState10[0],setThirdOpen=_React$useState10[1],popupRef=react.useRef(null),secondPopupRef=react.useRef(null),thirdPopupRef=react.useRef(null);react.useEffect((function(){if(open&&popupRef.current){var _getCurrentTabster4,first=null===(_getCurrentTabster4=Object(Tabster.d)(window))||void 0===_getCurrentTabster4?void 0:_getCurrentTabster4.focusable.findFirst(popupRef.current);null==first||first.focus()}}),[popupRef,open]),react.useEffect((function(){if(secondOpen&&secondPopupRef.current){var _getCurrentTabster5,first=null===(_getCurrentTabster5=Object(Tabster.d)(window))||void 0===_getCurrentTabster5?void 0:_getCurrentTabster5.focusable.findFirst(secondPopupRef.current);null==first||first.focus()}}),[secondPopupRef,secondOpen]),react.useEffect((function(){if(thirdOpen&&thirdPopupRef.current){var _getCurrentTabster6,first=null===(_getCurrentTabster6=Object(Tabster.d)(window))||void 0===_getCurrentTabster6?void 0:_getCurrentTabster6.focusable.findFirst(thirdPopupRef.current);null==first||first.focus()}}),[thirdPopupRef,thirdOpen]);return Object(jsx_runtime.jsxs)("div",Object.assign({},Object(Tabster.g)({deloser:{}}),{children:[Object(jsx_runtime.jsx)("button",{onClick:function onClick(){return setOpen((function(s){return!s}))},children:"Toggle popup"}),open&&Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsxs)("div",Object.assign({ref:popupRef,"aria-label":"popup",style:popupStyles},Object(Tabster.g)({deloser:{},modalizer:{id:"modalizer"}}),{children:[Object(jsx_runtime.jsx)("button",{onClick:function onClick(){return setSecondOpen(!0)},children:"Open next"}),Object(jsx_runtime.jsx)("button",{onClick:function onClick(){return setOpen(!1)},children:"Dismiss"})]})),Object(jsx_runtime.jsx)("button",{children:"Outside Modalizer"})]}),secondOpen&&Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsxs)("div",Object.assign({ref:secondPopupRef,"aria-label":"popup",style:popupStyles},Object(Tabster.g)({deloser:{},modalizer:{id:"modalizer-2"}}),{children:[Object(jsx_runtime.jsx)("button",{onClick:function onClick(){return setThirdOpen(!0)},children:"Open next"}),Object(jsx_runtime.jsx)("button",{onClick:function onClick(){return setSecondOpen(!1)},children:"Dismiss"})]})),Object(jsx_runtime.jsx)("button",{children:"Outside Modalizer"})]}),thirdOpen&&Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)("div",Object.assign({ref:thirdPopupRef,"aria-label":"popup",style:popupStyles},Object(Tabster.g)({deloser:{},modalizer:{id:"modalizer-3"}}),{children:Object(jsx_runtime.jsx)("button",{onClick:function onClick(){return setThirdOpen(!1)},children:"Dismiss"})})),Object(jsx_runtime.jsx)("button",{children:"Outside Modalizer"})]}),Object(jsx_runtime.jsx)("button",{onClick:function onClick(){setOpen(!1),setSecondOpen(!1),setThirdOpen(!1)},children:"Close all"})]}))};Modalizer_stories_ModalizerStack.displayName="ModalizerStack"}},[[334,1,2]]]);
//# sourceMappingURL=main.5ff3c654.iframe.bundle.js.map